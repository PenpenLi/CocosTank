{"version":3,"sources":["MatchingCtrl.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\Scripts\\Page","sourcesContent":["import WebSocketManage from '../WebSocketManage';\r\nimport HomePageCtrl from './HomePageCtrl'\r\nimport BattleCtrl from './BattleCatrl';\r\nimport { Node, show, Label, Sprite, Prefab } from '../../../creator';\r\n// Learn TypeScript:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/typescript/index.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n    private WebScoketNode: cc.Node = null;\r\n    @property(cc.Node)\r\n    private headImg: cc.Node = null;\r\n    @property(cc.Node)\r\n    private Success: cc.Node = null;\r\n    @property(cc.Node)\r\n    private MainPlaysName: cc.Node = null;\r\n    @property(cc.Node)\r\n    private MainPlaysHeadImg: cc.Node = null;\r\n    @property(cc.Node)\r\n    private VicePlaysName: cc.Node = null;\r\n    @property(cc.Node)\r\n    private VicePlaysHeadImg: cc.Node = null;\r\n    private HomePage: cc.Node = null;\r\n\r\n    @property(cc.Prefab)\r\n    private BattlePage: cc.Prefab = null;\r\n    private userData = {};\r\n    /**\r\n     * 点击返回按钮\r\n     */\r\n    onClickBackButton() {\r\n        var webScoket = this.WebScoketNode.getComponent(WebSocketManage);\r\n        webScoket.sendMessage({ msg: 3 });\r\n        this.node.destroy();\r\n    }\r\n    start() {\r\n        var self = this;\r\n        this.HomePage = cc.find('Canvas/HomePagePanel');\r\n        this.userData = this.HomePage.getComponent(HomePageCtrl).UserData;\r\n        cc.loader.load({ url: self.userData.headimgurl, type: 'png' }, function (err, texture) {\r\n            self.headImg.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n        })\r\n        this.WebScoketNode = cc.find('WebScoket')\r\n        var webScoket = this.WebScoketNode.getComponent(WebSocketManage);\r\n        webScoket.sendMessage({ msg: 2 });\r\n    }\r\n    public setBattelData(response) {\r\n        var self = this;\r\n        this.Success.active = true;\r\n        if (response.data) {\r\n            this.MainPlaysName.getComponent(cc.Label).string = this.userData.nickname;\r\n            cc.loader.load({ url: self.userData.headimgurl, type: 'png' }, function (err, texture) {\r\n                self.MainPlaysHeadImg.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n            })\r\n            this.VicePlaysName.getComponent(cc.Label).string = response.enemyData.nickname;\r\n            cc.loader.load({ url: response.enemyData.headimgurl, type: 'png' }, function (err, texture) {\r\n                self.VicePlaysHeadImg.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n            })\r\n        } else {\r\n            this.VicePlaysName.getComponent(cc.Label).string = this.userData.nickname;\r\n            this.VicePlaysHeadImg.getComponent(cc.Sprite).spriteFrame = this.headImg.getComponent(cc.Sprite).spriteFrame;\r\n            this.MainPlaysName.getComponent(cc.Label).string = response.enemyData.nickname;\r\n            cc.loader.load({ url: response.enemyData.headimgurl, type: 'png' }, function (err, texture) {\r\n                self.MainPlaysHeadImg.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n            })\r\n        }\r\n        var battlePage = cc.instantiate(this.BattlePage);\r\n        battlePage.parent = this.node.parent;\r\n        battlePage.zIndex = -1;\r\n        if(response.data){\r\n            battlePage.getComponent(BattleCtrl).initScore(0);\r\n        } else {\r\n            battlePage.getComponent(BattleCtrl).initScore(1);\r\n        }\r\n        setTimeout(() => {\r\n            if (response.data) {\r\n                battlePage.getComponent(BattleCtrl).sendCallBackFor0();\r\n            }\r\n            battlePage.zIndex = 1;\r\n            self.destroy();\r\n        }, 1000);\r\n    }\r\n}\r\n"]}