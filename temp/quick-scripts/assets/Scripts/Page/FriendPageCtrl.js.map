{"version":3,"sources":["FriendPageCtrl.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\Scripts\\Page","sourcesContent":["import WebSocketMange from '../Unit/WebSocketManage';\r\nimport HomePageCtrl from '../Page/HomePageCtrl';\r\nimport BattleCtrl from '../Page/BattleCtrl';\r\n// Learn TypeScript:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n    @property(cc.Prefab)\r\n    private BattlePage: cc.Prefab = null;\r\n    private HomePageCtrl: HomePageCtrl = null;\r\n    private WebSocket: WebSocketMange = null;\r\n    private roomNumber = '';\r\n\r\n    private currentPlayer = true;\r\n    private player = {\r\n        // 主玩家\r\n        main: {\r\n            headImgNode: null,\r\n            nickNameNode: null,\r\n        },\r\n        // 副玩家\r\n        vice: {\r\n            headImgNode: null,\r\n            nickNameNode: null,\r\n        }\r\n    }\r\n    start() {\r\n        this.WebSocket = cc.find('WebScoket').getComponent(WebSocketMange);\r\n        this.WebSocket.sendMessage({\r\n            msg: 4\r\n        })\r\n    }\r\n    public init(type) {\r\n        var _self = this;\r\n        this.player.main.headImgNode = this.node.getChildByName('Player').getChildByName('player1').getChildByName('Mask').getChildByName('headImg');\r\n        this.player.main.nickNameNode = this.node.getChildByName('Player').getChildByName('player1').getChildByName('nickname');\r\n        this.player.vice.headImgNode = this.node.getChildByName('Player').getChildByName('player2').getChildByName('Mask').getChildByName('headImg');\r\n        this.player.vice.nickNameNode = this.node.getChildByName('Player').getChildByName('player2').getChildByName('nickname');\r\n        this.HomePageCtrl = cc.find('Canvas/HomePagePanel').getComponent(HomePageCtrl);\r\n        // 创建房间\r\n        if(type === 0) {\r\n            var userInfo = this.HomePageCtrl.userInfo;\r\n            this.player.main.nickNameNode.getComponent(cc.Label).string = userInfo.nickname;\r\n            cc.loader.load({url: userInfo.headimgurl, type: 'png'}, function(err, texture) {\r\n                _self.player.main.headImgNode.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n            })\r\n        }\r\n        // 房主获取对方信息\r\n        if(type === 1) {\r\n            var viceuserInfo = this.HomePageCtrl.viceUserInfo;\r\n            this.player.vice.nickNameNode.getComponent(cc.Label).string = viceuserInfo.nickname;\r\n            cc.loader.load({url: viceuserInfo.headimgurl, type: 'png'}, function(err, texture) {\r\n                _self.player.vice.headImgNode.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n            })\r\n        }\r\n        // 被邀请玩家进入房间\r\n        if(type === 2) {\r\n            this.currentPlayer = false;\r\n            var userInfo = this.HomePageCtrl.userInfo;\r\n            this.player.vice.nickNameNode.getComponent(cc.Label).string = userInfo.nickname;\r\n            cc.loader.load({url: userInfo.headimgurl, type: 'png'}, function(err, texture) {\r\n                _self.player.vice.headImgNode.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n            })\r\n            this.node.getChildByName('ButtonBox').getChildByName('button_4').active = false;\r\n            var viceuserInfo = this.HomePageCtrl.viceUserInfo;\r\n            this.player.main.nickNameNode.getComponent(cc.Label).string = viceuserInfo.nickname;\r\n            cc.loader.load({url: viceuserInfo.headimgurl, type: 'png'}, function(err, texture) {\r\n                _self.player.main.headImgNode.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n            })\r\n        }\r\n    }\r\n    onShare() {\r\n        if(this.roomNumber === '') {\r\n            return\r\n        }\r\n        wx.shareAppMessage({\r\n            title: '坦克大战',\r\n            query: `room=${this.roomNumber}`,\r\n            success: function (res) {\r\n                console.log(wx.getLaunchOptionsSync())\r\n            },\r\n            fail: function (res) {\r\n                console.log(res, 'error')\r\n            }\r\n        })\r\n    }\r\n    onBack() {\r\n        this.WebSocket.sendMessage({\r\n            msg: '5'\r\n        })\r\n        this.node.destroy();\r\n    }\r\n    onClickStart() {\r\n        this.WebSocket.sendMessage({\r\n            msg: '211'\r\n        })\r\n        var battlePage = cc.instantiate(this.BattlePage);\r\n        battlePage.parent = this.node.parent;\r\n        battlePage.getComponent(BattleCtrl).initScore(0);\r\n        battlePage.getComponent(BattleCtrl).generateMap();\r\n        this.node.destroy();\r\n    }\r\n    public getOnClickStart() {\r\n        var battlePage = cc.instantiate(this.BattlePage);\r\n        battlePage.parent = this.node.parent;\r\n        battlePage.getComponent(BattleCtrl).initScore(1);\r\n        this.node.destroy();\r\n    }\r\n    // update (dt) {}\r\n    public getRoomNumber(res) {\r\n        this.roomNumber = res.data;\r\n    }\r\n}\r\n"]}