{"version":3,"sources":["LinkedMap.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../assets/Scripts/Unit","sourcesContent":["export default class LinkedMap {\n  private column: number = 0;\n  private row: number = 0;\n  private cells: number = 0;\n  private player_1: number = 0;\n  private player_2: number = 0;\n  private linkedMap = {};\n  private unionSets = null;\n  constructor(column: number = 0, row: number = 0, player_1: number = 0, player_2: number = 0) {\n    this.column = column;\n    this.row = row;\n    this.cells = column * row;\n    this.player_1 = player_1;\n    this.player_2 = player_2;\n    this.unionSets = new UnionSet(this.cells);\n  }\n  generate() {\n    while(!this.playerLinked()) {\n      var cellPairs = this.pickRandomCellPairs();\n      if(!this.unionSets.sameSet(cellPairs[0], cellPairs[1])) {\n        this.unionSets.union(cellPairs[0], cellPairs[1]);\n        this.addLinkedMap(cellPairs[0], cellPairs[1]);\n      }\n    }\n    return this.linkedMap;\n  }\n  playerLinked() {\n    return this.unionSets.sameSet(this.player_1, this.player_2);\n  }\n  pickRandomCellPairs() {\n    var cell = Math.random() * this.cells >> 0;\n    var neiborCells = [];\n    var row = cell / this.column >> 0,\n        column = cell % this.column;\n    if(row !== 0) {\n      neiborCells.push(cell - this.column);\n    }\n    if(row !== this.row - 1) {\n      neiborCells.push(cell + this.column);\n    }\n    if(column !== 0) {\n      neiborCells.push(cell - 1);\n    }\n    if(column !== this.column - 1) {\n      neiborCells.push(cell + 1);\n    }\n    var index = Math.random() * neiborCells.length >> 0;\n    return [cell, neiborCells[index]];\n  }\n  addLinkedMap(x, y) {\n    if(!this.linkedMap[x]) this.linkedMap[x] = [];\n    if(!this.linkedMap[y]) this.linkedMap[y] = [];\n    if(this.linkedMap[x].indexOf(y) < 0) this.linkedMap[x].push(y);\n    if(this.linkedMap[y].indexOf(x) < 0) this.linkedMap[y].push(x);\n  }\n}\nclass UnionSet {\n  private setArray = null;\n  constructor(size) {\n    this.setArray = new Array(size);\n    for (let i = this.setArray.length - 1; i >= 0; i--) {\n      this.setArray[i] = -1;\n    }\n  }\n  union(root1, root2) {\n    if (this.setArray[root1] === -1 && this.setArray[root2] === -1) {\n      this.setArray[root1] = root2;\n      this.setArray[root2] = root1;\n    } else if (this.setArray[root1] === -1 && this.setArray[root2] !== -1) {\n      this.setArray[root1] = this.setArray[root2];\n    } else if (this.setArray[root1] !== -1 && this.setArray[root2] === -1) {\n      this.setArray[root2] = this.setArray[root1];\n    } else {\n      let v = this.setArray[root1];\n      for (let i = 0; i < this.setArray.length; i++) {\n        if (this.setArray[i] === v) {\n          this.setArray[i] = this.setArray[root2]\n        }\n      }\n    }\n  }\n  sameSet(x, y) {\n    return this.setArray[x] !== -1 && this.setArray[y] !== -1 && this.setArray[x] === this.setArray[y]\n  }\n}"]}