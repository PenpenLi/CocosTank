{"version":3,"sources":["TransferClass.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\Scripts\\Unit","sourcesContent":["import HomePageCtrl from '../Page/HomePageCtrl';\r\nimport MatchingPage from '../Page/MatchingCtrl';\r\nimport BattleCtrl from '../Page/BattleCtrl';\r\nimport PlayerOperationCtrl from '../Parts/PlayerOperationCtrl';\r\nimport TankCtrl from '../Parts/TankCtrl';\r\n\r\n// Learn TypeScript:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Transfer extends cc.Component {\r\n    // 主页\r\n    public HomePage: cc.Node = null;\r\n    // 匹配页\r\n    public MatchPage: cc.Node = null;\r\n    // 战斗页\r\n    public BattlePage: cc.Node = null;\r\n    // 操作盘\r\n    public Operation: cc.Node = null;\r\n    // 主玩家\r\n\r\n\r\n    // 获取用户信息\r\n    public getUserDataForHomePageCtrl(res) {\r\n        console.log(res)\r\n        var homePageCtrl = null;\r\n        this.HomePage = cc.find('Canvas/HomePagePanel');\r\n        homePageCtrl = this.HomePage.getComponent(HomePageCtrl);\r\n        homePageCtrl.getUserData(res);\r\n    }\r\n    // 切换匹配状态\r\n    public generateMapForHomePageCtrl(res) {\r\n        console.log(res)\r\n        var homePageCtrl = null;\r\n        this.HomePage = cc.find('Canvas/HomePagePanel');\r\n        homePageCtrl = this.HomePage.getComponent(HomePageCtrl);\r\n        homePageCtrl.enemyUserData = res.enemyData;\r\n        var matchPageCtrl = null;\r\n        this.MatchPage = cc.find('Canvas/MatchingPagePanel');\r\n        matchPageCtrl = this.MatchPage.getComponent(MatchingPage);\r\n        matchPageCtrl.setBattleData(res)\r\n    }\r\n    // 地图匹配\r\n    public getMapForBattlePageCtrl(res) {\r\n        var battlePageCtrl = null;\r\n        this.BattlePage = cc.find('Canvas/BattlePagePanel');\r\n        battlePageCtrl = this.BattlePage.getComponent(BattleCtrl);\r\n        battlePageCtrl.getMap(res)\r\n    }\r\n    // 位置匹配\r\n    public positionUnicomForOperationCtrl(res) {\r\n        var operationCtrl = null;\r\n        this.Operation = cc.find('Canvas/BattlePagePanel/BattleBox/operation');\r\n        operationCtrl = this.Operation.getComponent(PlayerOperationCtrl);\r\n        operationCtrl.getViceOperationData(res)\r\n    }\r\n    // 开炮\r\n    public fireButtleForOperationCtrl(res) {\r\n        var operationCtrl = null;\r\n        this.Operation = cc.find('Canvas/BattlePagePanel/BattleBox/operation');\r\n        operationCtrl = this.Operation.getComponent(PlayerOperationCtrl);\r\n        operationCtrl.addReceiveButtle(res)\r\n    }\r\n    // 死亡\r\n    public dieForTankCtrl(res) {\r\n        // 0代表副玩家\r\n        var player: cc.Node = null;\r\n        var children = cc.find('Canvas/BattlePagePanel/BattleBox/BattleRegion').children;\r\n        cc.find('Canvas/BattlePagePanel').getComponent(BattleCtrl).scoreCount(res.data.scoreType);\r\n        if(res.data.scoreType === 1 && cc.find('Canvas/BattlePagePanel').getComponent(BattleCtrl).playerName === 'tank_1' ||\r\n            res.data.scoreType === 0 && cc.find('Canvas/BattlePagePanel').getComponent(BattleCtrl).playerName === 'tank_2'\r\n        ) {\r\n            cc.find('Canvas/BattlePagePanel').getComponent(BattleCtrl).gameOver(0);\r\n        } else {\r\n            cc.find('Canvas/BattlePagePanel').getComponent(BattleCtrl).gameOver(1);\r\n        }\r\n        // 移除碰撞子弹节点\r\n        for(let i = 0; i < children.length; i++) {\r\n            if(children[i].getChildByName(res.data.buttleName)) {\r\n                children[i].getChildByName(res.data.buttleName).destroy();\r\n                break;\r\n            }\r\n        }\r\n        if (res.data.scoreType === 0) {\r\n            for (let i = 0; i < children.length; i++) {\r\n                if (children[i].getChildByName('tank_2')) {\r\n                    player = children[i].getChildByName('tank_2')\r\n                    var playerCompeont = player.getComponent(TankCtrl);\r\n                    playerCompeont.gameOver(res);\r\n                    return\r\n                }\r\n            }\r\n        } else {\r\n            for (let i = 0; i < children.length; i++) {\r\n                if (children[i].getChildByName('tank_1')) {\r\n                    player = children[i].getChildByName('tank_1')\r\n                    var playerCompeont = player.getComponent(TankCtrl);\r\n                    playerCompeont.gameOver(res);\r\n                    return\r\n                }\r\n            }\r\n        }\r\n    }\r\n    // 重新开始\r\n    public restartForBattleCtrl(res) {\r\n        var battlePageCtrl = null;\r\n        this.BattlePage = cc.find('Canvas/BattlePagePanel');\r\n        battlePageCtrl = this.BattlePage.getComponent(BattleCtrl);\r\n        battlePageCtrl.ready.active = false;\r\n        if(battlePageCtrl.playerName === 'tank_1') {\r\n            battlePageCtrl.restart();\r\n        }\r\n    }\r\n    // 对方离开房间\r\n    public leaveForBattleCtrl(res) {\r\n        var battlePageCtrl = null;\r\n        this.BattlePage = cc.find('Canvas/BattlePagePanel');\r\n        battlePageCtrl = this.BattlePage.getComponent(BattleCtrl);\r\n        battlePageCtrl.viceLeave();\r\n    }\r\n    public genteraPropsForBattleCtrl(res) {\r\n        var battlePageCtrl = null;\r\n        this.BattlePage = cc.find('Canvas/BattlePagePanel');\r\n        battlePageCtrl = this.BattlePage.getComponent(BattleCtrl);\r\n        battlePageCtrl.genearteProp(res.data.point, res.data.rotation, res.data.propType);\r\n    }\r\n}\r\n"]}