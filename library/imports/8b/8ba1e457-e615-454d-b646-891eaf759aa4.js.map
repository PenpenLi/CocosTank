{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Scripts\\Page/assets\\Scripts\\Page\\BattleCtrl.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\Scripts\\Page","sourcesContent":["import LinkedMap from '../Unit/LinkedMap';\r\nimport WebSocketManage from '../Unit/WebSocketManage';\r\nimport HomePageCtrl from './HomePageCtrl';\r\n// Learn TypeScript:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/typescript/index.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\r\nconst { ccclass, property } = cc._decorator;\r\n@ccclass\r\nexport default class BattleCtrl extends cc.Component {\r\n    @property(cc.Prefab)\r\n    private wall_column_1: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    private wall_row_1: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    private wall_column_2: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    private wall_row_2: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    private wall_column_3: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    private wall_row_3: cc.Prefab = null;\r\n    @property(cc.Node)\r\n    private BattleRegion: cc.Node = null;\r\n    @property(cc.Node)\r\n    private TopCell: cc.Node = null;\r\n    @property(cc.Node)\r\n    private BottomCell: cc.Node = null;\r\n    @property(cc.Node)\r\n    private LeftCell: cc.Node = null;\r\n    @property(cc.Node)\r\n    private RightCell: cc.Node = null;\r\n    @property(cc.Prefab)\r\n    private player1: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    private player2: cc.Prefab = null;\r\n    @property(cc.SpriteFrame)\r\n    private fllower_1: cc.SpriteFrame = null;\r\n    @property(cc.SpriteFrame)\r\n    private fllower_2: cc.SpriteFrame = null;\r\n    @property(cc.SpriteFrame)\r\n    private fllower_3: cc.SpriteFrame = null;\r\n    @property(cc.SpriteFrame)\r\n    private horn_1: cc.SpriteFrame = null;\r\n    @property(cc.SpriteFrame)\r\n    private horn_2: cc.SpriteFrame = null;\r\n    @property(cc.SpriteFrame)\r\n    private horn_3: cc.SpriteFrame = null;\r\n    @property(cc.Prefab)\r\n    private operation: cc.Prefab = null;\r\n    private webScoket: WebSocketManage = null;\r\n    // 战斗数据\r\n    private battleData = []\r\n    private activeBattleData = null;\r\n    private cells = 0;\r\n    private externalResources = [];\r\n    private activeExternalData = null;\r\n    private linkedMap = {};\r\n    private player = [];\r\n    private Exterrandom = 0;\r\n    // 当前玩家节点名称\r\n    public playerName = 'tank_1'\r\n    // 根据双方玩家位置生成的区间数组\r\n    public setArray = null;\r\n    @property(cc.Prefab)\r\n    private props: cc.Prefab = null;\r\n    // 主玩家头像\r\n    @property(cc.Node)\r\n    private MainPlayerHeadImg: cc.Node = null;\r\n    // 主玩家名字\r\n    @property(cc.Node)\r\n    private MainPlayerName: cc.Node = null;\r\n    // 主玩家得分\r\n    @property(cc.Node)\r\n    private MainPlayerScore: cc.Node = null;\r\n    // 副玩家头像\r\n    @property(cc.Node)\r\n    private VicePlayerHeadImg: cc.Node = null;\r\n    // 副玩家名字\r\n    @property(cc.Node)\r\n    private VicePlayerName: cc.Node = null;\r\n    // 副玩家得分\r\n    @property(cc.Node)\r\n    private VicePlayerScore: cc.Node = null;\r\n    // 游戏结束显示节点\r\n    @property(cc.Node)\r\n    private GameStatus: cc.Node = null;\r\n    @property(cc.SpriteFrame)\r\n    private defeat: cc.SpriteFrame = null;\r\n    @property(cc.SpriteFrame)\r\n    private victory: cc.SpriteFrame = null;\r\n    @property(cc.Node)\r\n    public ready: cc.Node = null;\r\n    private propsTime = null;\r\n    // 道具图标列表\r\n    private propsList = ['prop_1', 'prop_3', 'prop_6'];\r\n\r\n    public reGameOverStatus = false;\r\n\r\n    start() {\r\n        this.initBattleData();\r\n    }\r\n\r\n    initBattleData() {\r\n        this.webScoket = cc.find('WebScoket').getComponent(WebSocketManage);\r\n        console.log('initBattleData');\r\n        let self = this;\r\n        this.externalResources = [\r\n            { cellColumn: this.wall_column_1, cellRow: this.wall_row_1, flower: this.fllower_1, horn: this.horn_1, bg: 'floor_1' },\r\n            { cellColumn: this.wall_column_2, cellRow: this.wall_row_2, flower: this.fllower_2, horn: this.horn_2, bg: 'floor_2' },\r\n            { cellColumn: this.wall_column_3, cellRow: this.wall_row_3, flower: this.fllower_3, horn: this.horn_3, bg: 'floor_3' },\r\n        ]\r\n        this.battleData = [\r\n            { row: 3, column: 7, scale: 1 },\r\n            { row: 4, column: 9, scale: 0.775 },\r\n            { row: 5, column: 11, scale: 0.645 },\r\n            // { row: 6, column: 13, scale: 0.539 },\r\n            // { row: 7, column: 15, scale: 0.484 }\r\n        ]\r\n        // 地图尺寸随机\r\n        var random = Math.random() * this.battleData.length >> 0;\r\n        this.activeBattleData = this.battleData[random]\r\n        // 地图修饰随机\r\n        this.Exterrandom = Math.random() * this.externalResources.length >> 0;\r\n        this.activeExternalData = this.externalResources[this.Exterrandom];\r\n        this.cells = this.activeBattleData.column * this.activeBattleData.row\r\n        this.initPlayerPoint();\r\n    }\r\n\r\n    // 双方玩家位置随机\r\n    initPlayerPoint() {\r\n        this.player = [];\r\n        this.player.push({\r\n            point: Math.random() * this.cells >> 0,\r\n            rotation: Math.random() * 180 >> 0\r\n        });\r\n        this.player.push({\r\n            point: Math.random() * this.cells >> 0,\r\n            rotation: Math.random() * 180 >> 0\r\n        });\r\n        if (this.player[0].point - this.player[1].point > -10 && this.player[0].point - this.player[1].point < 10) {\r\n            this.initPlayerPoint()\r\n        }\r\n    }\r\n    // 设置墙属性\r\n    setCellData(type, scale) {\r\n        if (type === 0) {\r\n            var node = cc.instantiate(this.activeExternalData.cellColumn);\r\n            node.scale = scale;\r\n            return node;\r\n        } else {\r\n            var node = cc.instantiate(this.activeExternalData.cellRow);\r\n            node.scale = scale;\r\n            return node;\r\n        }\r\n    }\r\n    setHornData(scale, rotation) {\r\n        var horn = new cc.Node();\r\n        horn.addComponent(cc.Sprite).spriteFrame = this.activeExternalData.horn;\r\n        horn.scale = scale;\r\n        horn.rotation = rotation;\r\n        return horn;\r\n    }\r\n    setFlowerData(scale, rotation) {\r\n        var flower = new cc.Node();\r\n        flower.addComponent(cc.Sprite).spriteFrame = this.activeExternalData.flower;\r\n        flower.scale = scale;\r\n        flower.rotation = rotation;\r\n        return flower;\r\n    }\r\n    /**\r\n     * 生成外部墙体\r\n     */\r\n    externalCell() {\r\n        var self = this;\r\n        cc.loader.loadRes(self.activeExternalData.bg, cc.SpriteFrame, function (err, spriteFrame) {\r\n            self.BattleRegion.getComponent(cc.Sprite).spriteFrame = spriteFrame\r\n        })\r\n        // 计算图片缩放比，0.8814为不算阴影的图片墙体实际比例，此处将该实体墙比例作为1比例计算\r\n        var externalCellWidth = this.TopCell.width / this.activeBattleData.column\r\n        var scale = externalCellWidth / 194 / 0.8814;\r\n        for (let i = 0; i < this.activeBattleData.column; i++) {\r\n            var node = this.setCellData(0, scale);\r\n            node.setPosition(externalCellWidth * i - this.BottomCell.width / 2 + externalCellWidth / 2, 0);\r\n            this.BottomCell.addChild(node);\r\n            var horn_1 = this.setHornData(scale, 180);\r\n            horn_1.setPosition(-this.BottomCell.width / 2 - horn_1.width * scale / 6, -horn_1.height * scale / 3.5);\r\n            this.BottomCell.addChild(horn_1);\r\n            horn_1 = this.setHornData(scale, 90);\r\n            horn_1.setPosition(this.BottomCell.width / 2 + horn_1.width * scale / 1.5, -horn_1.height * scale / 3.5);\r\n            this.BottomCell.addChild(horn_1);\r\n            var flower = this.setFlowerData(scale, 180);\r\n            flower.setPosition(externalCellWidth * i - this.BottomCell.width / 2 + externalCellWidth / 2 + 10 * scale, -flower.height * scale / 2);\r\n            this.BottomCell.addChild(flower);\r\n            horn_1 = this.setHornData(scale, 270);\r\n            horn_1.setPosition(-this.TopCell.width / 2 - horn_1.width * scale / 5, horn_1.height * scale / 2);\r\n            this.TopCell.addChild(horn_1);\r\n            horn_1 = this.setHornData(scale, 0);\r\n            horn_1.setPosition(this.TopCell.width / 2 + horn_1.width * scale / 1.7, horn_1.height * scale / 2);\r\n            this.TopCell.addChild(horn_1);\r\n            node = this.setCellData(0, scale);\r\n            node.setPosition(externalCellWidth * i - this.TopCell.width / 2 + externalCellWidth / 2, 0)\r\n            this.TopCell.addChild(node);\r\n            flower = this.setFlowerData(scale, 0);\r\n            flower.setPosition(externalCellWidth * i - this.TopCell.width / 2 + externalCellWidth / 2 + 10 * scale, flower.height * scale / 2 + node.height * scale / 2);\r\n            this.TopCell.addChild(flower);\r\n\r\n        }\r\n        var externalCellHeigth = this.LeftCell.height / this.activeBattleData.row;\r\n        scale = externalCellHeigth / 194 / 0.88;\r\n        for (let i = 0; i < this.activeBattleData.row; i++) {\r\n            var flower = this.setFlowerData(scale, 270);\r\n            flower.setPosition(-flower.height * scale / 2 + 0.5, externalCellHeigth * i - this.LeftCell.height / 2 + externalCellHeigth / 2 + 12 * scale);\r\n            this.LeftCell.addChild(flower);\r\n            var node = this.setCellData(1, scale);\r\n            node.setPosition(0, externalCellHeigth * i - this.LeftCell.height / 2 + externalCellHeigth / 2);\r\n            this.LeftCell.addChild(node);\r\n            node = this.setCellData(1, scale);\r\n            node.setPosition(0, externalCellHeigth * i - this.RightCell.height / 2 + externalCellHeigth / 2);\r\n            this.RightCell.addChild(node);\r\n            flower = this.setFlowerData(scale, 90);\r\n            flower.setPosition((flower.height * scale / 2 + node.width * scale / 2), externalCellHeigth * i - this.RightCell.height / 2 + externalCellHeigth / 2 + 11 * scale);\r\n            this.RightCell.addChild(flower);\r\n        }\r\n    }\r\n    /**\r\n     * 内部资源生成\r\n     * @param i \r\n     */\r\n    generateRegion(i) {\r\n        var probability = 0.9;\r\n        var row = i / this.activeBattleData.column >> 0,\r\n            column = i % this.activeBattleData.column;\r\n        var layoutNode = new cc.Node('layoutNode');\r\n        var cellWidth = Math.floor((this.BattleRegion.width / this.activeBattleData.column) * 100) / 100;\r\n        var cellHeight = this.BattleRegion.height / this.activeBattleData.row\r\n        layoutNode.addComponent(cc.Layout);\r\n        layoutNode.setContentSize(cellWidth, cellHeight);\r\n        this.BattleRegion.addChild(layoutNode);\r\n        // 右边的墙\r\n        if (column !== this.activeBattleData.column - 1 && (!this.linkedMap[i] || this.linkedMap[i].indexOf(i + 1) < 0)) {\r\n            var scale = cellHeight / 194 / 0.8814;\r\n            var rightCell = cc.instantiate(this.activeExternalData.cellRow);\r\n            layoutNode.addChild(rightCell);\r\n            rightCell.scale = scale;\r\n            rightCell.setPosition(this.BattleRegion.width / this.activeBattleData.column * (column + 1), -rightCell.height * scale / 2 - (row * rightCell.height * scale) + (rightCell.height * scale * 0.1185) * row + 10 * scale)\r\n        }\r\n        // 下边的墙\r\n        if (row !== this.activeBattleData.row - 1 && (!this.linkedMap[i] || this.linkedMap[i].indexOf(i + this.activeBattleData.column) < 0)) {\r\n            var scale = cellWidth / 194 / 0.8814;\r\n            var bottomCell = cc.instantiate(this.activeExternalData.cellColumn);\r\n            layoutNode.addChild(bottomCell);\r\n            bottomCell.scale = scale;\r\n            bottomCell.setPosition(this.BattleRegion.width / this.activeBattleData.column * (column + 1) - bottomCell.width * scale / 2 + 7 * scale, -this.BattleRegion.height / this.activeBattleData.row * (row + 1))\r\n        }\r\n        if (i === this.player[0].point) {\r\n            var player1 = cc.instantiate(this.player1);\r\n            player1.scale = this.activeBattleData.scale;\r\n            player1.rotation = this.player[0].rotation;\r\n            player1.zIndex = 10;\r\n            player1.setPosition(this.BattleRegion.width / this.activeBattleData.column * column + this.BattleRegion.width / this.activeBattleData.column / 2, - this.BattleRegion.height / this.activeBattleData.row * row - this.BattleRegion.height / this.activeBattleData.row / 2);\r\n            layoutNode.addChild(player1);\r\n        }\r\n        if (i === this.player[1].point) {\r\n            var player2 = cc.instantiate(this.player2);\r\n            player2.scale = this.activeBattleData.scale;\r\n            player2.rotation = this.player[1].rotation;\r\n            player2.zIndex = 10;\r\n            player2.setPosition(this.BattleRegion.width / this.activeBattleData.column * column + this.BattleRegion.width / this.activeBattleData.column / 2, - this.BattleRegion.height / this.activeBattleData.row * row - this.BattleRegion.height / this.activeBattleData.row / 2);\r\n            layoutNode.addChild(player2);\r\n        }\r\n    }\r\n    // 返回大厅\r\n    onBack() {\r\n        this.webScoket.sendMessage({\r\n            msg: 28\r\n        })\r\n        this.node.destroy();\r\n        clearInterval(this.propsTime);\r\n    }\r\n    // 生成道具\r\n    public genearteProp(point, rotation, type) {\r\n        var prop = cc.instantiate(this.props);\r\n        cc.loader.loadRes(type, cc.SpriteFrame, function (err, spriteFrame) {\r\n            prop.getComponent(cc.Sprite).spriteFrame = spriteFrame;\r\n        })\r\n        prop.zIndex = 5;\r\n        prop.rotation = rotation;\r\n        prop.name = type;\r\n        prop.scale = this.activeBattleData.scale;\r\n        this.BattleRegion.children[point].addChild(prop);\r\n    }\r\n    // 获取道具可生成区域\r\n    propsRefreshInterval() {\r\n        var propsInterval = [];\r\n        var propsLocationList = [];\r\n        clearInterval(this.propsTime)\r\n        var interval = this.setArray[this.player[0].point];\r\n        for (let i = 0; i < this.setArray.length; i++) {\r\n            if (this.setArray[i] === interval) {\r\n                propsInterval.push(i);\r\n            }\r\n        }\r\n        this.propsTime = setInterval(() => {\r\n            var point = this.propLocation(propsInterval, propsLocationList);\r\n            propsLocationList.push(point);\r\n            var rotation = Math.random() * 360 >> 0;\r\n            var propType = this.propsList[Math.random() * this.propsList.length >> 0]\r\n            this.webScoket.sendMessage({\r\n                msg: 29,\r\n                data: {\r\n                    point: point,\r\n                    rotation: rotation,\r\n                    propType: propType\r\n                }\r\n            })\r\n            this.genearteProp(point, rotation, propType);\r\n        }, 5000)\r\n        setTimeout(() => {\r\n            setInterval(() => {\r\n                if(propsLocationList.length !== 0) {\r\n                    propsLocationList.splice(0, 1);\r\n                }\r\n            }, 5000)\r\n        }, 12000)\r\n    }\r\n    propLocation(regionList, currentList) {\r\n        var point = regionList[Math.random() * regionList.length >> 0];\r\n        if (currentList.indexOf(point) === -1) { \r\n            return point;\r\n        } else {\r\n            return this.propLocation(regionList, currentList);\r\n        }\r\n    }\r\n    // 点击再來一局修改准备状态\r\n    onClickRestart() {\r\n        this.webScoket.sendMessage({\r\n            msg: 27\r\n        })\r\n        this.GameStatus.active = false;\r\n        this.ready.active = true;\r\n    }\r\n    public initScore(type) {\r\n        var self = this;\r\n        var homePageCtrl = cc.find('Canvas/HomePagePanel').getComponent(HomePageCtrl);\r\n        var userData = homePageCtrl.userInfo;\r\n        var enemyUserData = homePageCtrl.viceUserInfo;\r\n        // 该玩家是主玩家\r\n        if (type === 0) {\r\n            cc.loader.load({ url: userData.headimgurl, type: 'png' }, function (err, texture) {\r\n                self.MainPlayerHeadImg.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n            })\r\n            self.MainPlayerName.getComponent(cc.Label).string = userData.nickname;\r\n            cc.loader.load({ url: enemyUserData.headimgurl, type: 'png' }, function (err, texture) {\r\n                self.VicePlayerHeadImg.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n            })\r\n            self.VicePlayerName.getComponent(cc.Label).string = enemyUserData.nickname;\r\n        } else {\r\n            cc.loader.load({ url: userData.headimgurl, type: 'png' }, function (err, texture) {\r\n                self.VicePlayerHeadImg.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n            })\r\n            self.VicePlayerName.getComponent(cc.Label).string = userData.nickname;\r\n\r\n            cc.loader.load({ url: enemyUserData.headimgurl, type: 'png' }, function (err, texture) {\r\n                self.MainPlayerHeadImg.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n            })\r\n            self.MainPlayerName.getComponent(cc.Label).string = enemyUserData.nickname;\r\n        }\r\n    }\r\n    _onRemoveNode() {\r\n        this.TopCell.removeAllChildren();\r\n        this.LeftCell.removeAllChildren();\r\n        this.RightCell.removeAllChildren();\r\n        this.BottomCell.removeAllChildren();\r\n        this.BattleRegion.removeAllChildren();\r\n    }\r\n    // 重新开始\r\n    public restart() {\r\n        this._onRemoveNode();\r\n        if (this.playerName !== 'tank_2') {\r\n            this.initBattleData();\r\n            this.generateMap();\r\n        }\r\n    }\r\n    /**\r\n     * type: 游戏玩家区分 1是主玩家 0是副玩家\r\n     */\r\n    public gameOver(type) {\r\n        if (type === 0) {\r\n            this.GameStatus.getChildByName('bunko').getComponent(cc.Sprite).spriteFrame = this.defeat;\r\n        } else {\r\n            this.GameStatus.getChildByName('bunko').getComponent(cc.Sprite).spriteFrame = this.victory;\r\n        }\r\n        this.GameStatus.active = true;\r\n        clearInterval(this.propsTime)\r\n    }\r\n    public scoreCount(type) {\r\n        if (type === 0) {\r\n            var score = this.MainPlayerScore.getComponent(cc.Label).string;\r\n            this.MainPlayerScore.getComponent(cc.Label).string = parseInt(score) + 1 + '';\r\n        } else {\r\n            var score = this.VicePlayerScore.getComponent(cc.Label).string;\r\n            this.VicePlayerScore.getComponent(cc.Label).string = parseInt(score) + 1 + '';\r\n        }\r\n    }\r\n    // 生成地图\r\n    public generateMap() {\r\n        this.reGameOverStatus = true;\r\n        this.initBattleData();\r\n        var self = this;\r\n        console.log(self.activeBattleData, 'column')\r\n        var mapClass = new LinkedMap(self.activeBattleData.column, self.activeBattleData.row, self.player[0].point, self.player[1].point);\r\n        self.linkedMap = mapClass.generate();\r\n        this.setArray = mapClass.setArray;\r\n        self.externalCell();\r\n        for (let i = 0; i < self.cells; i++) {\r\n            self.generateRegion(i);\r\n        }\r\n        if (this.BattleRegion.parent.getChildByName('operation')) {\r\n            this.BattleRegion.parent.getChildByName('operation').destroy();\r\n        }\r\n        this.BattleRegion.parent.addChild(cc.instantiate(this.operation));\r\n        self.webScoket.sendMessage({\r\n            msg: 21,\r\n            data: {\r\n                battleData: [{\r\n                    column: self.activeBattleData.column,\r\n                    row: self.activeBattleData.row,\r\n                    scale: self.activeBattleData.scale\r\n                }],\r\n                player: self.player,\r\n                externaData: this.Exterrandom,\r\n                linkedMap: self.linkedMap\r\n            }\r\n        })\r\n        this.propsRefreshInterval()\r\n    }\r\n    // 获取地图信息\r\n    public getMap(response) {\r\n        this.reGameOverStatus = true;\r\n        this.initBattleData();\r\n        this._onRemoveNode();\r\n        var self = this\r\n        self.playerName = 'tank_2'\r\n        self.linkedMap = response.data.linkedMap;\r\n        self.player = response.data.player;\r\n        self.activeExternalData = self.externalResources[response.data.externaData];\r\n        self.activeBattleData = response.data.battleData[0];\r\n        var cells = self.activeBattleData.column * self.activeBattleData.row\r\n        self.externalCell();\r\n        for (let i = 0; i < cells; i++) {\r\n            self.generateRegion(i)\r\n        }\r\n        if (this.BattleRegion.parent.getChildByName('operation')) {\r\n            this.BattleRegion.parent.getChildByName('operation').destroy();\r\n        }\r\n        this.BattleRegion.parent.addChild(cc.instantiate(this.operation));\r\n    }\r\n    public viceLeave() {\r\n        clearInterval(this.propsTime)\r\n        this.ready.active = true;\r\n        this.ready.getChildByName('waiting_1').active = false;\r\n        this.ready.getChildByName('waiting_2').active = true;\r\n    }\r\n}"]}