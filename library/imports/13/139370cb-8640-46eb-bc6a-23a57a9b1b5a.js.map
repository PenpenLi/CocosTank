{"version":3,"sources":["../../../../../assets/Scripts/Page/assets/Scripts/Page/BattleCatrl.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../assets/Scripts/Page","sourcesContent":["import LinkedMap from '../Unit/LinkedMap';\nimport WebSocketManage from '../WebSocketManage';\nimport HomePageCtrl from '.                                   /Page/HomePageCtrl';\n// Learn TypeScript:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/typescript.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/typescript/index.html\n// Learn Attribute:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class BattleCtrl extends cc.Component {\n\n    @property(cc.Prefab)\n    private wall_column_1: cc.Prefab = null;\n    @property(cc.Prefab)\n    private wall_row_1: cc.Prefab = null;\n    @property(cc.Prefab)\n    private wall_column_2: cc.Prefab = null;\n    @property(cc.Prefab)\n    private wall_row_2: cc.Prefab = null;\n    @property(cc.Prefab)\n    private wall_column_3: cc.Prefab = null;\n    @property(cc.Prefab)\n    private wall_row_3: cc.Prefab = null;\n    @property(cc.Node)\n    private BattleRegion: cc.Node = null;\n    @property(cc.Node)\n    private TopCell: cc.Node = null;\n    @property(cc.Node)\n    private BottomCell: cc.Node = null;\n    @property(cc.Node)\n    private LeftCell: cc.Node = null;\n    @property(cc.Node)\n    private RightCell: cc.Node = null;\n    @property(cc.Prefab)\n    private player1: cc.Prefab = null;\n    @property(cc.Prefab)\n    private player2: cc.Prefab = null;\n    @property(cc.SpriteFrame)\n    private fllower_1: cc.SpriteFrame = null;\n    @property(cc.SpriteFrame)\n    private fllower_2: cc.SpriteFrame = null;\n    @property(cc.SpriteFrame)\n    private fllower_3: cc.SpriteFrame = null;\n    @property(cc.SpriteFrame)\n    private horn_1: cc.SpriteFrame = null;\n    @property(cc.SpriteFrame)\n    private horn_2: cc.SpriteFrame = null;\n    @property(cc.SpriteFrame)\n    private horn_3: cc.SpriteFrame = null;\n    private webScoket: WebSocketManage = null;\n    // 战斗数据\n    private battleData = [\n        { row: 3, column: 7, scale: 1 },\n        { row: 4, column: 9, scale: 0.775 },\n        { row: 5, column: 11, scale: 0.645 },\n        // { row: 6, column: 13, scale: 0.539 },\n        // { row: 7, column: 15, scale: 0.484 }\n    ]\n    private activeBattleData = null;\n    private cells = 0;\n    private externalResources = [];\n    private activeExternalData = null;\n    private linkedMap = {};\n    private player = [];\n    private Exterrandom = 0;\n    public playerName = 'tank_1'\n\n    @property(cc.Node)\n    private MainPlayerHeadImg: cc.Node = null;\n    @property(cc.Node)\n    private MainPlayerName: cc.Node = null;\n    @property(cc.Node)\n    private MainPlayerScore: cc.Node = null;\n    @property (cc.Node)\n    private VicePlayerHeadImg: cc.Node = null;\n    @property(cc.Node)\n    private VicePlayerName: cc.Node = null;\n    @property(cc.Node)\n    private VicePlayerScore: cc.Node = null;\n    \n    start() {\n        this.webScoket = cc.find('WebScoket').getComponent(WebSocketManage);\n        this.initBattleData();\n    }\n    initScore(type) {\n        var self = this;\n        var homePageCtrl = cc.find('Canvas/HomePagePanel').getComponent(HomePageCtrl);\n        var userData = homePageCtrl.UserData;\n        var enemyUserData = homePageCtrl.enemyUserData;\n        // 该玩家是主玩家\n        if(type === 0) {\n            cc.loader.load({ url: userData.headimgurl, type: 'png' }, function (err, texture) {\n                self.MainPlayerHeadImg.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\n            })\n            self.MainPlayerName.getComponent(cc.Label).string = userData.nickname;\n            cc.loader.load({ url: enemyUserData.headimgurl, type: 'png' }, function (err, texture) {\n                self.VicePlayerHeadImg.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\n            })\n            self.VicePlayerName.getComponent(cc.Label).string = enemyUserData.nickname;\n        } else {\n            cc.loader.load({ url: userData.headimgurl, type: 'png' }, function (err, texture) {\n                self.VicePlayerHeadImg.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\n            })\n            self.VicePlayerName.getComponent(cc.Label).string = userData.nickname;\n\n            cc.loader.load({ url: enemyUserData.headimgurl, type: 'png' }, function (err, texture) {\n                self.MainPlayerHeadImg.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\n            })\n            self.MainPlayerName.getComponent(cc.Label).string = enemyUserData.nickname;\n        }\n    }\n    public restart(type) {\n        if(type === 0) {\n            var score = this.MainPlayerScore.getComponent(cc.Label).string;\n            this.MainPlayerScore.getComponent(cc.Label).string = parseInt(score) + 1 + '';\n        } else {\n            var score = this.VicePlayerScore.getComponent(cc.Label).string;\n            this.VicePlayerScore.getComponent(cc.Label).string = parseInt(score) + 1 + '';\n        }\n\n        this.TopCell.removeAllChildren();\n        this.LeftCell.removeAllChildren();\n        this.RightCell.removeAllChildren();\n        this.BottomCell.removeAllChildren();\n        this.BattleRegion.removeAllChildren();\n\n        if (this.playerName !== 'tank_2') {\n            this.initBattleData();\n            this.sendCallBackFor0();\n        }\n    }\n    initBattleData() {\n        let self = this;\n        this.externalResources = [\n            { cellColumn: this.wall_column_1, cellRow: this.wall_row_1, flower: this.fllower_1, horn: this.horn_1, bg: 'floor_1' },\n            { cellColumn: this.wall_column_2, cellRow: this.wall_row_2, flower: this.fllower_2, horn: this.horn_2, bg: 'floor_2' },\n            { cellColumn: this.wall_column_3, cellRow: this.wall_row_3, flower: this.fllower_3, horn: this.horn_3, bg: 'floor_3' },\n        ]\n        // 地图尺寸随机\n        var random = Math.random() * this.battleData.length >> 0;\n        this.activeBattleData = this.battleData[random]\n        // 地图修饰随机\n        this.Exterrandom = Math.random() * this.externalResources.length >> 0;\n        this.activeExternalData = this.externalResources[this.Exterrandom];\n        this.cells = this.activeBattleData.column * this.activeBattleData.row\n        this.initPlayerPoint();\n    }\n    public sendCallBackFor0() {\n        var self = this;\n        self.linkedMap = new LinkedMap(self.activeBattleData.column, self.activeBattleData.row, self.player[0].point, self.player[1].point).generate();\n        self.externalCell();\n        for (let i = 0; i < self.cells; i++) {\n            self.generateRegion(i);\n        }\n        self.webScoket.sendMessage({\n            msg: 21,\n            data: {\n                battleData: [{\n                    column: self.activeBattleData.column,\n                    row: self.activeBattleData.row,\n                    scale: self.activeBattleData.scale\n                }],\n                player: self.player,\n                externaData: this.Exterrandom,\n                linkedMap: self.linkedMap\n            }\n        })\n    }\n    public sendCallBackFor1(response) {\n        var self = this\n        self.playerName = 'tank_2'\n        self.linkedMap = response.data.linkedMap;\n        self.player = response.data.player;\n        self.activeExternalData = self.externalResources[response.data.externaData];\n        self.activeBattleData = response.data.battleData[0];\n        var cells = self.activeBattleData.column * self.activeBattleData.row\n        self.externalCell();\n        for (let i = 0; i < cells; i++) {\n            self.generateRegion(i)\n        }\n    }\n    // 双方玩家位置随机\n    initPlayerPoint() {\n        this.player = [];\n        this.player.push({\n            point: Math.random() * this.cells >> 0,\n            rotation: Math.random() * 180 >> 0\n        });\n        this.player.push({\n            point: Math.random() * this.cells >> 0,\n            rotation: Math.random() * 180 >> 0\n        });\n        if (this.player[0] === this.player[1]) {\n            this.initPlayerPoint()\n        }\n    }\n    // 设置墙属性\n    setCellData(type, scale) {\n        if (type === 0) {\n            var node = cc.instantiate(this.activeExternalData.cellColumn);\n            node.scale = scale;\n            return node;\n        } else {\n            var node = cc.instantiate(this.activeExternalData.cellRow);\n            node.scale = scale;\n            return node;\n        }\n    }\n    setHornData(scale, rotation) {\n        var horn = new cc.Node();\n        horn.addComponent(cc.Sprite).spriteFrame = this.activeExternalData.horn;\n        horn.scale = scale;\n        horn.rotation = rotation;\n        return horn;\n    }\n    setFlowerData(scale, rotation) {\n        var flower = new cc.Node();\n        flower.addComponent(cc.Sprite).spriteFrame = this.activeExternalData.flower;\n        flower.scale = scale;\n        flower.rotation = rotation;\n        return flower;\n    }\n    /**\n     * 生成外部墙体\n     */\n    externalCell() {\n        var self = this;\n        cc.loader.loadRes(self.activeExternalData.bg, cc.SpriteFrame, function (err, spriteFrame) {\n            self.BattleRegion.getComponent(cc.Sprite).spriteFrame = spriteFrame\n        })\n        // 计算图片缩放比，0.8814为不算阴影的图片墙体实际比例，此处将该实体墙比例作为1比例计算\n        var externalCellWidth = this.TopCell.width / this.activeBattleData.column\n        var scale = externalCellWidth / 194 / 0.8814;\n        for (let i = 0; i < this.activeBattleData.column; i++) {\n            var node = this.setCellData(0, scale);\n            node.setPosition(externalCellWidth * i - this.BottomCell.width / 2 + externalCellWidth / 2, 0);\n            this.BottomCell.addChild(node);\n            var horn_1 = this.setHornData(scale, 180);\n            horn_1.setPosition(-this.BottomCell.width / 2 - horn_1.width * scale / 6, -horn_1.height * scale / 3.5);\n            this.BottomCell.addChild(horn_1);\n            horn_1 = this.setHornData(scale, 90);\n            horn_1.setPosition(this.BottomCell.width / 2 + horn_1.width * scale / 1.5, -horn_1.height * scale / 3.5);\n            this.BottomCell.addChild(horn_1);\n            var flower = this.setFlowerData(scale, 180);\n            flower.setPosition(externalCellWidth * i - this.BottomCell.width / 2 + externalCellWidth / 2 + 10 * scale, -flower.height * scale / 2);\n            this.BottomCell.addChild(flower);\n            horn_1 = this.setHornData(scale, 270);\n            horn_1.setPosition(-this.TopCell.width / 2 - horn_1.width * scale / 5, horn_1.height * scale / 2);\n            this.TopCell.addChild(horn_1);\n            horn_1 = this.setHornData(scale, 0);\n            horn_1.setPosition(this.TopCell.width / 2 + horn_1.width * scale / 1.7, horn_1.height * scale / 2);\n            this.TopCell.addChild(horn_1);\n            node = this.setCellData(0, scale);\n            node.setPosition(externalCellWidth * i - this.TopCell.width / 2 + externalCellWidth / 2, 0)\n            this.TopCell.addChild(node);\n            flower = this.setFlowerData(scale, 0);\n            flower.setPosition(externalCellWidth * i - this.TopCell.width / 2 + externalCellWidth / 2 + 10 * scale, flower.height * scale / 2 + node.height * scale / 2);\n            this.TopCell.addChild(flower);\n\n        }\n        var externalCellHeigth = this.LeftCell.height / this.activeBattleData.row;\n        scale = externalCellHeigth / 194 / 0.88;\n        for (let i = 0; i < this.activeBattleData.row; i++) {\n            var flower = this.setFlowerData(scale, 270);\n            flower.setPosition(-flower.height * scale / 2 + 0.5, externalCellHeigth * i - this.LeftCell.height / 2 + externalCellHeigth / 2 + 12 * scale);\n            this.LeftCell.addChild(flower);\n            var node = this.setCellData(1, scale);\n            node.setPosition(0, externalCellHeigth * i - this.LeftCell.height / 2 + externalCellHeigth / 2);\n            this.LeftCell.addChild(node);\n            node = this.setCellData(1, scale);\n            node.setPosition(0, externalCellHeigth * i - this.RightCell.height / 2 + externalCellHeigth / 2);\n            this.RightCell.addChild(node);\n            flower = this.setFlowerData(scale, 90);\n            flower.setPosition((flower.height * scale / 2 + node.width * scale / 2), externalCellHeigth * i - this.RightCell.height / 2 + externalCellHeigth / 2 + 11 * scale);\n            this.RightCell.addChild(flower);\n        }\n    }\n    /**\n     * 内部资源生成\n     * @param i \n     */\n    generateRegion(i) {\n        var probability = 0.9;\n        var row = i / this.activeBattleData.column >> 0,\n            column = i % this.activeBattleData.column;\n        var layoutNode = new cc.Node('layoutNode');\n        var cellWidth = Math.floor((this.BattleRegion.width / this.activeBattleData.column) * 100) / 100;\n        var cellHeight = this.BattleRegion.height / this.activeBattleData.row\n        layoutNode.addComponent(cc.Layout);\n        layoutNode.setContentSize(cellWidth, cellHeight);\n        this.BattleRegion.addChild(layoutNode);\n        // 右边的墙\n        if (column !== this.activeBattleData.column - 1 && (!this.linkedMap[i] || this.linkedMap[i].indexOf(i + 1) < 0)) {\n            var scale = cellHeight / 194 / 0.8814;\n            var rightCell = cc.instantiate(this.activeExternalData.cellRow);\n            layoutNode.addChild(rightCell);\n            rightCell.scale = scale;\n            rightCell.setPosition(this.BattleRegion.width / this.activeBattleData.column * (column + 1), -rightCell.height * scale / 2 - (row * rightCell.height * scale) + (rightCell.height * scale * 0.1185) * row + 10 * scale)\n        }\n        // 下边的墙\n        if (row !== this.activeBattleData.row - 1 && (!this.linkedMap[i] || this.linkedMap[i].indexOf(i + this.activeBattleData.column) < 0)) {\n            var scale = cellWidth / 194 / 0.8814;\n            var bottomCell = cc.instantiate(this.activeExternalData.cellColumn);\n            layoutNode.addChild(bottomCell);\n            bottomCell.scale = scale;\n            bottomCell.setPosition(this.BattleRegion.width / this.activeBattleData.column * (column + 1) - bottomCell.width * scale / 2 + 7 * scale, -this.BattleRegion.height / this.activeBattleData.row * (row + 1))\n        }\n        if (i === this.player[0].point) {\n            var player1 = cc.instantiate(this.player1);\n            player1.scale = this.activeBattleData.scale;\n            player1.rotation = this.player[0].rotation;\n            player1.setPosition(this.BattleRegion.width / this.activeBattleData.column * column + this.BattleRegion.width / this.activeBattleData.column / 2, - this.BattleRegion.height / this.activeBattleData.row * row - this.BattleRegion.height / this.activeBattleData.row / 2);\n            layoutNode.addChild(player1);\n        }\n        if (i === this.player[1].point) {\n            var player2 = cc.instantiate(this.player2);\n            player2.scale = this.activeBattleData.scale;\n            player2.rotation = this.player[1].rotation;\n            player2.setPosition(this.BattleRegion.width / this.activeBattleData.column * column + this.BattleRegion.width / this.activeBattleData.column / 2, - this.BattleRegion.height / this.activeBattleData.row * row - this.BattleRegion.height / this.activeBattleData.row / 2);\n            layoutNode.addChild(player2);\n        }\n    }\n}"]}