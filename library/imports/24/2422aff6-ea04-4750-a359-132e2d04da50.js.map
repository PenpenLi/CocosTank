{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Scripts\\Unit/assets\\Scripts\\Unit\\LinkedMap.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\Scripts\\Unit","sourcesContent":["export default class LinkedMap {\r\n  private column: number = 0;\r\n  private row: number = 0;\r\n  private cells: number = 0;\r\n  private player_1: number = 0;\r\n  private player_2: number = 0;\r\n  private linkedMap = {};\r\n  private unionSets = null;\r\n  public setArray = null;\r\n  constructor(column: number = 0, row: number = 0, player_1: number = 0, player_2: number = 0) {\r\n    this.column = column;\r\n    this.row = row;\r\n    this.cells = column * row;\r\n    this.player_1 = player_1;\r\n    this.player_2 = player_2;\r\n    this.unionSets = new UnionSet(this.cells);\r\n  }\r\n  generate() {\r\n    while(!this.playerLinked()) {\r\n      var cellPairs = this.pickRandomCellPairs();\r\n      if(!this.unionSets.sameSet(cellPairs[0], cellPairs[1])) {\r\n        this.unionSets.union(cellPairs[0], cellPairs[1]);\r\n        this.addLinkedMap(cellPairs[0], cellPairs[1]);\r\n      }\r\n    }\r\n    this.setArray = this.unionSets.setArray\r\n    return this.linkedMap;\r\n  }\r\n  playerLinked() {\r\n    return this.unionSets.sameSet(this.player_1, this.player_2);\r\n  }\r\n  pickRandomCellPairs() {\r\n    var cell = Math.random() * this.cells >> 0;\r\n    var neiborCells = [];\r\n    var row = cell / this.column >> 0,\r\n        column = cell % this.column;\r\n    if(row !== 0) {\r\n      neiborCells.push(cell - this.column);\r\n    }\r\n    if(row !== this.row - 1) {\r\n      neiborCells.push(cell + this.column);\r\n    }\r\n    if(column !== 0) {\r\n      neiborCells.push(cell - 1);\r\n    }\r\n    if(column !== this.column - 1) {\r\n      neiborCells.push(cell + 1);\r\n    }\r\n    var index = Math.random() * neiborCells.length >> 0;\r\n    return [cell, neiborCells[index]];\r\n  }\r\n  addLinkedMap(x, y) {\r\n    if(!this.linkedMap[x]) this.linkedMap[x] = [];\r\n    if(!this.linkedMap[y]) this.linkedMap[y] = [];\r\n    if(this.linkedMap[x].indexOf(y) < 0) this.linkedMap[x].push(y);\r\n    if(this.linkedMap[y].indexOf(x) < 0) this.linkedMap[y].push(x);\r\n  }\r\n}\r\nclass UnionSet {\r\n  public setArray = null;\r\n  constructor(size) {\r\n    this.setArray = new Array(size);\r\n    for (let i = this.setArray.length - 1; i >= 0; i--) {\r\n      this.setArray[i] = -1;\r\n    }\r\n  }\r\n  union(root1, root2) {\r\n    if (this.setArray[root1] === -1 && this.setArray[root2] === -1) {\r\n      this.setArray[root1] = root2;\r\n      this.setArray[root2] = root1;\r\n    } else if (this.setArray[root1] === -1 && this.setArray[root2] !== -1) {\r\n      this.setArray[root1] = this.setArray[root2];\r\n    } else if (this.setArray[root1] !== -1 && this.setArray[root2] === -1) {\r\n      this.setArray[root2] = this.setArray[root1];\r\n    } else {\r\n      let v = this.setArray[root1];\r\n      for (let i = 0; i < this.setArray.length; i++) {\r\n        if (this.setArray[i] === v) {\r\n          this.setArray[i] = this.setArray[root2]\r\n        }\r\n      }\r\n    }\r\n  }\r\n  sameSet(x, y) {\r\n    return this.setArray[x] !== -1 && this.setArray[y] !== -1 && this.setArray[x] === this.setArray[y]\r\n  }\r\n}"]}