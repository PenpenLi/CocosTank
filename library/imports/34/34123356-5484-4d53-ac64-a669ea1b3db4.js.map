{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Scripts\\Page/assets\\Scripts\\Page\\HomePageCtrl.ts"],"names":[],"mappings":";;;;;AAGM,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAAQ,CAAmB;AAG5C;IAAsC,4BAAY;IADlD;QAAA,qEA2FC;QAxFG,gBAAU,GAAc,IAAI,CAAC;QAE7B,qBAAe,GAAmB,IAAI,CAAC;QAEvC,sBAAgB,GAAmB,IAAI,CAAC;QAExC,aAAO,GAAgB,IAAI,CAAC;QACrB,aAAO,GAAY,IAAI,CAAC,CAAA,QAAQ;QAG/B,UAAI,GAAY,IAAI,CAAC;QACtB,cAAQ,GAAG,EAAE,CAAC;QACd,mBAAa,GAAG,EAAE,CAAC;QAElB,mBAAa,GAAY,IAAI,CAAC;;IA0E1C,CAAC;IAzEG,wBAAK,GAAL;QACI,EAAE,CAAC,aAAa,EAAE,CAAC;QACnB,EAAE,CAAC,KAAK,CAAC;YACL,OAAO,EAAE,UAAS,GAAG;gBACjB,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;YACpB,CAAC;SACJ,CAAC,CAAA;QACF,EAAE,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,gBAAgB,EAAE,CAAC,CAAA;QAEzC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACxB,IAAI,CAAC,OAAO,EAAE,CAAA;IAClB,CAAC;IACD;;OAEG;IACH,qCAAkB,GAAlB;QACI,uBAAuB;QACvB,oBAAoB;QACpB,KAAK;QAEL,EAAE,CAAC,UAAU,CAAC;YACV,OAAO,EAAE,UAAS,GAAG;gBACjB,IAAG,GAAG,CAAC,WAAW,CAAC,gBAAgB,CAAC,EAAE;oBAClC,EAAE,CAAC,WAAW,CAAC;wBACX,OAAO,EAAE,UAAS,GAAG;4BACjB,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;wBACpB,CAAC;qBACJ,CAAC,CAAA;iBACL;YACL,CAAC;YACD,IAAI,EAAE,UAAS,GAAG;gBACd,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;YACpB,CAAC;SACJ,CAAC,CAAA;QACF,oEAAoE;QACpE,kCAAkC;IACtC,CAAC;IACD;;OAEG;IACH,qCAAkB,GAAlB,UAAmB,KAAK;QACpB,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC;QAC7B,IAAI,YAAY,GAAc,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;QACnE,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,WAAW,GAAG,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,WAAW,GAAG,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAA;IACtK,CAAC;IACD,0BAAO,GAAP;QACI,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,UAAU,CAAC;YACP,IAAI,CAAC,OAAO,EAAE,CAAC;QACnB,CAAC,EAAE,IAAI,CAAC,CAAA;QACR,IAAI,GAAG,GAAG,6CAA6C,CAAA;QACvD,sDAAsD;QACtD,IAAI,OAAO,CAAC;QACZ,IAAI,KAAK,GAAG,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC;QACjC,OAAO,GAAG,IAAI,cAAc,EAAE,CAAC;QAC/B,OAAO,CAAC,kBAAkB,GAAG,YAAY,CAAC;QAC1C,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;QAC/B,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACnB;YACI,IAAI,OAAO,CAAC,UAAU,KAAK,CAAC,EAAE;gBAC1B,IAAI,OAAO,CAAC,MAAM,KAAK,GAAG,EAAE;oBACxB,IAAI,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC;oBAC/B,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,CAAC,GAAG,GAAG,KAAK,CAAC,GAAG,IAAI,CAAA;iBACjE;aACJ;QACL,CAAC;IACL,CAAC;IACM,8BAAW,GAAlB,UAAmB,QAAQ;QACvB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,IAAI,CAAC;QAC9B,IAAI,cAAc,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACrD,cAAc,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;QACzC,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;IACzB,CAAC;IAvFD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;gDACS;IAE7B;QADC,QAAQ,CAAC,EAAE,CAAC,WAAW,CAAC;qDACc;IAEvC;QADC,QAAQ,CAAC,EAAE,CAAC,WAAW,CAAC;sDACe;IAExC;QADC,QAAQ,CAAC,EAAE,CAAC,WAAW,CAAC;6CACG;IAI5B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;0CACW;IAI7B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;mDACoB;IAhBrB,QAAQ;QAD5B,OAAO;OACa,QAAQ,CA0F5B;IAAD,eAAC;CA1FD,AA0FC,CA1FqC,EAAE,CAAC,SAAS,GA0FjD;kBA1FoB,QAAQ","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\Scripts\\Page","sourcesContent":["import WebSocketManage from '../Unit/WebSocketManage';\r\nimport { AudioSource } from '../../creator';\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n    @property(cc.Prefab)\r\n    lobbyPanel: cc.Prefab = null;\r\n    @property(cc.SpriteFrame)\r\n    openSoundSprite: cc.SpriteFrame = null;\r\n    @property(cc.SpriteFrame)\r\n    closeSoundSprite: cc.SpriteFrame = null;\r\n    @property(cc.AudioSource)\r\n    bgSound: AudioSource = null;\r\n    public IsSound: boolean = true;//是否开启音效\r\n\r\n    @property(cc.Node)\r\n    private ping: cc.Node = null;\r\n    public UserData = {};\r\n    public enemyUserData = {};\r\n    @property(cc.Node)\r\n    private WebScoketNode: cc.Node = null;\r\n    start() {\r\n        wx.showShareMenu();\r\n        wx.login({\r\n            success: function(res) {\r\n                console.log(res)\r\n            }\r\n        })\r\n        wx.authorize({ scope: 'scope.userInfo' })\r\n\r\n        this.ping.zIndex = 9999;\r\n        this.getPing()\r\n    }\r\n    /**\r\n     * 点击开始\r\n     */\r\n    OnClickStartButton() {\r\n        // wx.shareAppMessage({\r\n        //     title: '转发标题'\r\n        // })\r\n\r\n        wx.getSetting({\r\n            success: function(res) {\r\n                if(res.authSetting['scope.userInfo']) {\r\n                    wx.getUserInfo({\r\n                        success: function(res) {\r\n                            console.log(res)\r\n                        }\r\n                    })\r\n                }\r\n            },\r\n            fail: function(res){\r\n                console.log(res)\r\n            }\r\n        })\r\n        // var webscoket = this.WebScoketNode.getComponent(WebSocketManage);\r\n        // webscoket.sendMessage({msg: 1})\r\n    }\r\n    /**\r\n     * 点击声音按钮\r\n     */\r\n    OnClickSoundButton(event) {\r\n        this.IsSound = !this.IsSound;\r\n        var buttonSprite: cc.Sprite = event.target.getComponent(cc.Sprite);\r\n        this.IsSound ? (buttonSprite.spriteFrame = this.openSoundSprite, this.bgSound.resume()) : (buttonSprite.spriteFrame = this.closeSoundSprite, this.bgSound.pause())\r\n    }\r\n    getPing() {\r\n        var self = this;\r\n        setTimeout(() => {\r\n            self.getPing();\r\n        }, 1000)\r\n        var url = 'http://app.ei-marketing.net/tankWar/ping.do'\r\n        // var url = 'http://172.17.0.13:8080/tankWar/ping.do'\r\n        var xmlHttp;\r\n        var start = new Date().getTime();\r\n        xmlHttp = new XMLHttpRequest();\r\n        xmlHttp.onreadystatechange = state_Change;\r\n        xmlHttp.open('GET', url, true);\r\n        xmlHttp.send(null);\r\n        function state_Change() {\r\n            if (xmlHttp.readyState === 4) {\r\n                if (xmlHttp.status === 200) {\r\n                    var end = new Date().getTime();\r\n                    self.ping.getComponent(cc.Label).string = (end - start) + 'ms'\r\n                }\r\n            }\r\n        }\r\n    }\r\n    public getUserData(response) {\r\n        this.UserData = response.data;\r\n        var lobbyPanelPage = cc.instantiate(this.lobbyPanel);\r\n        lobbyPanelPage.parent = this.node.parent;\r\n        this.enabled = false;\r\n    }\r\n}\r\n"]}