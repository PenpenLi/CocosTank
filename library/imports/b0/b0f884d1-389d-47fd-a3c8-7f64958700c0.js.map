{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Scripts\\Parts/assets\\Scripts\\Parts\\PlayerOperationCtrl.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\Scripts\\Parts","sourcesContent":["import BattleCtrl from '../Page/BattleCtrl';\r\nimport WebSocketManage from '../Unit/WebSocketManage';\r\nimport Bullet3 from './Buttle3Ctrl';\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n    @property(cc.Prefab)\r\n    private bullet: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    private bullet6: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    private bullet3: cc.Prefab = null;\r\n\r\n    private currentSpecialBullet = null;\r\n    // 战斗区域节点\r\n    private BattleRegion: cc.Node = null;\r\n    // WebSocket节点\r\n    private WebSocket: WebSocketManage = null;\r\n    // 玩家相关数据\r\n    public player = {\r\n        current: {\r\n            node: null,\r\n            actionList: [],\r\n            fireStatus: 0,\r\n            bulletLimit: 0,\r\n            fireRate: 0,\r\n            buttleType: 0\r\n        },\r\n        vice: {\r\n            node: null,\r\n            actionList: [],\r\n            buttleType: 0\r\n        }\r\n    }\r\n    private operationStatus = {\r\n        up: false,\r\n        right: false,\r\n        bottom: false,\r\n        left: false\r\n    }\r\n    start() {\r\n        this.BattleRegion = this.node.parent.getChildByName('BattleRegion');\r\n        this.WebSocket = cc.find('WebScoket').getComponent(WebSocketManage);\r\n        this._onGetPlayerNode(this.BattleRegion.parent.parent.getComponent(BattleCtrl).playerName);\r\n        this._onEventListener();\r\n    }\r\n    update(dt) {\r\n        if (this.operationStatus.up) this.onCurrentOperation(0);\r\n        if (this.operationStatus.right) this.onCurrentOperation(1);\r\n        if (this.operationStatus.bottom) this.onCurrentOperation(2);\r\n        if (this.operationStatus.left) this.onCurrentOperation(3);\r\n        if (this.player.current.fireStatus === 1) {\r\n            this.bulletLimit(0, 5, 0);\r\n            this.player.current.fireStatus = 0;\r\n        }\r\n        // 加特林模式控制速率及偏移角度随机\r\n        if (this.player.current.fireStatus === 2 && this.player.current.fireRate % 5 === 0) {\r\n            this.bulletLimit(1, 20, 8 - Math.random() * 16);\r\n        }\r\n        this.player.current.fireRate++;\r\n        this.onViceOperation()\r\n    }\r\n    // 当前玩家移动操作\r\n    onCurrentOperation(type) {\r\n        var speed = 5;\r\n        switch (type) {\r\n            case 0:\r\n                this.player.current.node.x += speed * Math.sin(Math.PI * this.player.current.node.rotation / 180);\r\n                this.player.current.node.y += speed * Math.cos(Math.PI * this.player.current.node.rotation / 180);\r\n                break;\r\n            case 1:\r\n                this.player.current.node.rotation = (this.player.current.node.rotation + 5) % 360;\r\n                break;\r\n            case 2:\r\n                this.player.current.node.x -= speed * Math.sin(Math.PI * this.player.current.node.rotation / 180);\r\n                this.player.current.node.y -= speed * Math.cos(Math.PI * this.player.current.node.rotation / 180);\r\n                break;\r\n            case 3:\r\n                this.player.current.node.rotation - 5 < 0 ?\r\n                    this.player.current.node.rotation = 360 - this.player.current.node.rotation - 5 :\r\n                    this.player.current.node.rotation -= 5;\r\n                break;\r\n        }\r\n        this.sendOperationData({\r\n            type: 0,\r\n            x: this.player.current.node.x,\r\n            y: this.player.current.node.y,\r\n            rotation: this.player.current.node.rotation\r\n        })\r\n    }\r\n    // 将自身操作信息发送给对方\r\n    sendOperationData(data) {\r\n        this.player.current.actionList.push(data);\r\n        this.WebSocket.sendMessage({\r\n            msg: 22,\r\n            data: this.player.current.actionList\r\n        })\r\n        this.player.current.actionList = [];\r\n    }\r\n    // 根据对方玩家操作队列依次改变对方玩家位置\r\n    onViceOperation() {\r\n        if (this.player.vice.actionList.length === 0) return;\r\n        for (let i = 0; i < this.player.vice.actionList.length; i++) {\r\n            if (this.player.vice.actionList[0] && this.player.vice.actionList[0].type === 0) {\r\n                this.player.vice.node.x = this.player.vice.actionList[0].x;\r\n                this.player.vice.node.y = this.player.vice.actionList[0].y;\r\n                this.player.vice.node.rotation = this.player.vice.actionList[0].rotation;\r\n                this.player.vice.actionList.splice(0, 1);\r\n            }\r\n            if (this.player.vice.actionList[0] && this.player.vice.actionList[0].type === 1) {\r\n                var bullet = this.generateBullet(this.player.vice.actionList[0], 1)\r\n                this.player.vice.node.parent.addChild(bullet);\r\n                this.player.vice.actionList.splice(0, 1);\r\n            }\r\n        }\r\n    }\r\n    // 获取当前玩家节点以及敌方玩家节点\r\n    _onGetPlayerNode(mainNodeName) {\r\n        var viceNodeName = 'tank_1';\r\n        if (mainNodeName === 'tank_1') {\r\n            viceNodeName = 'tank_2'\r\n        }\r\n        var children = this.BattleRegion.children;\r\n        if (!children) return;\r\n        for (let i = 0; i < children.length; i++) {\r\n            if (children[i].getChildByName(mainNodeName)) {\r\n                this.player.current.node = children[i].getChildByName(mainNodeName);\r\n            }\r\n            if (children[i].getChildByName(viceNodeName)) {\r\n                this.player.vice.node = children[i].getChildByName(viceNodeName);\r\n            }\r\n            if (this.player.current.node && this.player.vice.node) {\r\n                return\r\n            }\r\n        }\r\n    }\r\n    // 事件监听注册\r\n    _onEventListener() {\r\n        this._onMoveListener(this.node.getChildByName('left'), 'left');\r\n        this._onMoveListener(this.node.getChildByName('right'), 'right');\r\n        this._onMoveListener(this.node.getChildByName('bottom'), 'bottom');\r\n        this._onMoveListener(this.node.getChildByName('up'), 'up');\r\n        this._onFireListener();\r\n    }\r\n    // 移动事件注册\r\n    _onMoveListener(node: cc.Node, moveType) {\r\n        var _self = this;\r\n        node.on(cc.Node.EventType.TOUCH_START, function (event) {\r\n            _self.operationStatus[moveType] = true\r\n        })\r\n        node.on(cc.Node.EventType.TOUCH_END, function (event) {\r\n            _self.operationStatus[moveType] = false\r\n        })\r\n        node.on(cc.Node.EventType.TOUCH_CANCEL, function (event) {\r\n            _self.operationStatus[moveType] = false\r\n        })\r\n    }\r\n    // 发射事件注册\r\n    _onFireListener() {\r\n        var _self = this;\r\n        var node = this.node.getChildByName('fire');\r\n        node.on(cc.Node.EventType.TOUCH_START, function (event) {\r\n            // 普通炮弹类型\r\n            if (_self.player.current.buttleType === 0) {\r\n                _self.player.current.fireStatus = 1;\r\n            } else if (_self.player.current.buttleType === 1) { // 加特林道具\r\n                _self.player.current.fireStatus = 2;\r\n            } else if (_self.player.current.buttleType === 6) { // 地雷\r\n                var bullet = _self.generateBullet({\r\n                    name: `tank_buttle_${_self.player.current.node.name.substring(5, 6)}_${_self.player.current.bulletLimit}`,\r\n                    bulletType: 6,\r\n                    scale: _self.player.current.node.scale,\r\n                    rotation: _self.player.current.node.rotation,\r\n                    x: _self.player.current.node.x,\r\n                    y: _self.player.current.node.y\r\n                }, 0);\r\n                _self.sendOperationData({\r\n                    type: 1,\r\n                    bulletType: 6,\r\n                    name: bullet.name,\r\n                    scale: bullet.scale,\r\n                    x: bullet.x,\r\n                    y: bullet.y,\r\n                    rotation: bullet.rotation\r\n                });\r\n                _self.player.current.node.parent.addChild(bullet);\r\n            } else if(_self.player.current.buttleType === 3) { // 重弹\r\n                var point = _self.bulletLocation();\r\n                var bullet = _self.generateBullet({\r\n                    name: `tank_buttle3`,\r\n                    bulletType: 3,\r\n                    scale: _self.player.current.node.scale,\r\n                    rotation: _self.player.current.node.rotation,\r\n                    x: point.x,\r\n                    y: point.y\r\n                }, 0)\r\n                _self.currentSpecialBullet = bullet.getComponent(Bullet3);\r\n                _self.player.current.buttleType = 31;\r\n                _self.sendOperationData({\r\n                    type: 1,\r\n                    bulletType: 3,\r\n                    name: bullet.name,\r\n                    scale: bullet.scale,\r\n                    x: bullet.x,\r\n                    y: bullet.y,\r\n                    rotation: bullet.rotation\r\n                });\r\n                _self.player.current.node.parent.addChild(bullet);\r\n            } else if(_self.player.current.buttleType === 31) {\r\n                _self.currentSpecialBullet.boom();\r\n            }\r\n        })\r\n        node.on(cc.Node.EventType.TOUCH_END, function (event) {\r\n            _self.player.current.fireStatus = 0\r\n        })\r\n        node.on(cc.Node.EventType.TOUCH_CANCEL, function (event) {\r\n            _self.player.current.fireStatus = 0\r\n        })\r\n    }\r\n    // 子弹发射出口生成位置计算\r\n    bulletLocation() {\r\n        var centerX = this.player.current.node.x;\r\n        var CenterY = this.player.current.node.y;\r\n        var buttleX = centerX;\r\n        var buttleY = CenterY + this.player.current.node.height * this.player.current.node.scale / 2;\r\n        var x = (buttleY - CenterY) * Math.sin(Math.PI * this.player.current.node.rotation / 180) + centerX;\r\n        var y = (buttleY - CenterY) * Math.cos(Math.PI * this.player.current.node.rotation / 180) + (buttleX - centerX) * Math.sin(Math.PI * this.player.current.node.rotation / 180) + CenterY;\r\n        return {\r\n            x: x,\r\n            y: y\r\n        }\r\n    }\r\n    /**\r\n     * data: 自带属性\r\n     * type: 0为我方生成否则为敌方生成\r\n     */\r\n    public generateBullet(data, type) {\r\n        var bullet: cc.Node;\r\n        if (data.bulletType === 1 || data.bulletType === 0) {\r\n            bullet = cc.instantiate(this.bullet);\r\n            bullet.setPosition(data.x, data.y);\r\n        }\r\n        if (data.bulletType === 6) {\r\n            if (type === 0) {\r\n                bullet = cc.instantiate(this.bullet6);\r\n                bullet.setPosition(this.player.current.node.x, this.player.current.node.y);\r\n            } else {\r\n                bullet = cc.instantiate(this.bullet6);\r\n                bullet.setPosition(this.player.vice.node.x, this.player.vice.node.y);\r\n            }\r\n        }\r\n        if(data.bulletType === 3) {\r\n            bullet = cc.instantiate(this.bullet3);\r\n            bullet.setPosition(data.x, data.y);\r\n        }\r\n        bullet.name = data.name;\r\n        bullet.scale = data.scale;\r\n        bullet.rotation = data.rotation;\r\n        return bullet;\r\n    }\r\n    // 子弹数量控制\r\n    bulletLimit(bulletType, maxNumber, offset) {\r\n        var len = 0;\r\n        this.player.current.node.parent.children.map((node) => {\r\n            if (node.name.length > 11) {\r\n                len++;\r\n            }\r\n        })\r\n        if (len < maxNumber) {\r\n            this.player.current.bulletLimit = (this.player.current.bulletLimit + 1) % maxNumber;\r\n            var point = this.bulletLocation();\r\n            var data = {\r\n                name: `tank_buttle_${this.player.current.node.name.substring(5, 6)}_${this.player.current.bulletLimit}`,\r\n                bulletType: bulletType,\r\n                scale: this.player.current.node.scale,\r\n                rotation: this.player.current.node.rotation + offset,\r\n                x: point.x,\r\n                y: point.y\r\n            }\r\n            var bullet = this.generateBullet(data, 0);\r\n            this.player.current.node.parent.addChild(bullet);\r\n            this.sendOperationData({\r\n                type: 1,\r\n                bulletType: bulletType,\r\n                name: bullet.name,\r\n                scale: bullet.scale,\r\n                x: bullet.x,\r\n                y: bullet.y,\r\n                rotation: bullet.rotation\r\n            })\r\n        }\r\n    }\r\n    // 获取对方玩家操作信息添加到操作队列中\r\n    public getViceOperationData(res) {\r\n        this.player.vice.actionList.push(res.data[0]);\r\n    }\r\n}"]}