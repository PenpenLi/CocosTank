{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Scripts\\Parts/assets\\Scripts\\Parts\\PlayerOperationCtrl.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\Scripts\\Parts","sourcesContent":["import BattleCtrl from '../Page/BattleCtrl';\r\nimport WebSocketManage from '../Unit/WebSocketManage';\r\n// Learn TypeScript:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/typescript/index.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n    private BattleRegion: cc.Node = null;\r\n    @property(cc.Prefab)\r\n    private Buttle: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    private Buttle6: cc.Prefab = null;\r\n\r\n    // 当前玩家控制节点\r\n    private currentPlayer: cc.Node = null;\r\n    private vicePlayer: cc.Node = null;\r\n    // 旋转状态控制\r\n    private rotationStatus = 0;\r\n    // 移动状态控制\r\n    private moveStatus = 0;\r\n    // 战斗区域脚本\r\n    private BattleCtrl: BattleCtrl = null;\r\n    // webScoket脚本\r\n    private WebScoket: WebSocketManage = null;\r\n\r\n    private mainActionList = [];\r\n    private viceActionList = [];\r\n    private currentPlayerKeyBord = {\r\n        top: false,\r\n        right: false,\r\n        bottom: false,\r\n        left: false\r\n    }\r\n\r\n    // 子弹类型\r\n    private buttleType = 6;\r\n\r\n    private buttle1Status = false;\r\n    // 用于控制坦克子弹的生成控制\r\n    private i = 0;\r\n    private Density = 0;\r\n    start() {\r\n        this.BattleRegion = this.node.parent.getChildByName('BattleRegion');\r\n        this.BattleCtrl = this.node.parent.parent.getComponent(BattleCtrl);\r\n        this.getPlayer(this.BattleCtrl.playerName);\r\n        this.WebScoket = cc.find('WebScoket').getComponent(WebSocketManage);\r\n        this.onEventListener();\r\n    }\r\n\r\n    update(dt) {\r\n        if (this.buttle1Status) {\r\n            this.Density++;\r\n            if (this.Density % 5 === 0) {\r\n                this.i++;\r\n                var len = 0;\r\n                this.currentPlayer.parent.children.map((node) => {\r\n                    if (node.name.length > 11) {\r\n                        len++;\r\n                    }\r\n                })\r\n                if (len < 20) {\r\n                    this.generateBullet(`tank_buttle_${this.currentPlayer.name.substring(5, 6)}_${this.i}`, 5 - Math.random() * 10 >> 0)\r\n                }\r\n            }\r\n        }\r\n        this.Density++;\r\n        if (this.currentPlayerKeyBord.left) {\r\n            if (this.currentPlayer.rotation - 5 < 0) {\r\n                this.currentPlayer.rotation = 360 - this.currentPlayer.rotation - 5;\r\n            } else {\r\n                this.currentPlayer.rotation = this.currentPlayer.rotation - 5;\r\n            }\r\n            this.sendTankData()\r\n        }\r\n        if (this.currentPlayerKeyBord.right) {\r\n            this.currentPlayer.rotation = (this.currentPlayer.rotation + 5) % 360;\r\n            this.sendTankData()\r\n        }\r\n        if (this.currentPlayerKeyBord.top) {\r\n            var speed = 5;\r\n            this.currentPlayer.x += speed * Math.sin(Math.PI * this.currentPlayer.rotation / 180)\r\n            this.currentPlayer.y += speed * Math.cos(Math.PI * this.currentPlayer.rotation / 180)\r\n            this.sendTankData()\r\n        }\r\n        if (this.currentPlayerKeyBord.bottom) {\r\n            var speed = 5;\r\n            this.currentPlayer.x -= speed * Math.sin(Math.PI * this.currentPlayer.rotation / 180)\r\n            this.currentPlayer.y -= speed * Math.cos(Math.PI * this.currentPlayer.rotation / 180)\r\n            this.sendTankData()\r\n        }\r\n        if (this.viceActionList.length !== 0) {\r\n            // 位置联调\r\n            for (let i = 0; i < this.viceActionList.length; i++) {\r\n                if (this.viceActionList[0] && this.viceActionList[0].type === 0) {\r\n                    this.vicePlayer.x = this.viceActionList[0].x;\r\n                    this.vicePlayer.y = this.viceActionList[0].y;\r\n                    this.vicePlayer.rotation = this.viceActionList[0].rotation;\r\n                    this.viceActionList.splice(0, 1);\r\n                } else if (this.viceActionList[0].type === 1) { // 子弹发射\r\n                    this.generateReceiveButtle(this.viceActionList[0])\r\n                    this.viceActionList.splice(0, 1);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onEventListener() {\r\n        var self = this;\r\n        this.node.getChildByName('left').on(cc.Node.EventType.TOUCH_START, function (event) {\r\n            self.currentPlayerKeyBord.left = true;\r\n        })\r\n        this.node.getChildByName('left').on(cc.Node.EventType.TOUCH_END, function (event) {\r\n            self.currentPlayerKeyBord.left = false;\r\n        })\r\n        this.node.getChildByName('left').on(cc.Node.EventType.TOUCH_CANCEL, function (event) {\r\n            self.currentPlayerKeyBord.left = false;\r\n        })\r\n        this.node.getChildByName('right').on(cc.Node.EventType.TOUCH_START, function (event) {\r\n            self.currentPlayerKeyBord.right = true;\r\n        })\r\n        this.node.getChildByName('right').on(cc.Node.EventType.TOUCH_CANCEL, function (event) {\r\n            self.currentPlayerKeyBord.right = false;\r\n        })\r\n        this.node.getChildByName('right').on(cc.Node.EventType.TOUCH_END, function (event) {\r\n            self.currentPlayerKeyBord.right = false;\r\n        })\r\n        this.node.getChildByName('up').on(cc.Node.EventType.TOUCH_START, function (event) {\r\n            self.currentPlayerKeyBord.top = true;\r\n        })\r\n        this.node.getChildByName('up').on(cc.Node.EventType.TOUCH_CANCEL, function (event) {\r\n            self.currentPlayerKeyBord.top = false;\r\n        })\r\n        this.node.getChildByName('up').on(cc.Node.EventType.TOUCH_END, function (event) {\r\n            self.currentPlayerKeyBord.top = false;\r\n        })\r\n        this.node.getChildByName('bottom').on(cc.Node.EventType.TOUCH_START, function (event) {\r\n            self.currentPlayerKeyBord.bottom = true;\r\n        })\r\n        this.node.getChildByName('bottom').on(cc.Node.EventType.TOUCH_CANCEL, function (event) {\r\n            self.currentPlayerKeyBord.bottom = false;\r\n        })\r\n        this.node.getChildByName('bottom').on(cc.Node.EventType.TOUCH_END, function (event) {\r\n            self.currentPlayerKeyBord.bottom = false;\r\n        })\r\n        if (this.buttleType === 0) {\r\n            this.node.getChildByName('fire').on(cc.Node.EventType.TOUCH_START, function (event) {\r\n                var len = 0;\r\n                self.currentPlayer.parent.children.map((node) => {\r\n                    if (node.name.length > 11) {\r\n                        len++;\r\n                    }\r\n                })\r\n                if (len < 5) {\r\n                    self.i = (self.i + 1) % 5;\r\n                    self.generateBullet(`tank_buttle_${self.currentPlayer.name.substring(5, 6)}_${self.i}`, 0)\r\n                }\r\n            })\r\n        }\r\n        if (this.buttleType === 6) {\r\n            this.node.getChildByName('fire').on(cc.Node.EventType.TOUCH_START, function (event) {\r\n                var buttle = cc.instantiate(self.Buttle6);\r\n                buttle.name = 'tank_buttle6_'\r\n                buttle.scale = self.currentPlayer.scale;\r\n                buttle.rotation = self.currentPlayer.rotation;\r\n                buttle.zIndex = -1;\r\n                buttle.setPosition(self.currentPlayer.x, self.currentPlayer.y);\r\n                self.currentPlayer.parent.addChild(buttle);\r\n            })\r\n        }\r\n        if (this.buttleType === 1) {\r\n            this.node.getChildByName('fire').on(cc.Node.EventType.TOUCH_START, function (event) {\r\n                self.buttle1Status = true;\r\n            })\r\n            this.node.getChildByName('fire').on(cc.Node.EventType.TOUCH_END, function (event) {\r\n                self.buttle1Status = false;\r\n            })\r\n            this.node.getChildByName('fire').on(cc.Node.EventType.TOUCH_CANCEL, function (event) {\r\n                self.buttle1Status = false;\r\n            })\r\n        }\r\n    }\r\n    // 子弹生成\r\n    generateBullet(name, offset) {\r\n        var buttle = cc.instantiate(this.Buttle);\r\n        buttle.name = name\r\n        buttle.scale = this.currentPlayer.scale;\r\n        buttle.rotation = this.currentPlayer.rotation + offset;\r\n        buttle.zIndex = -1;\r\n        var centerPointx = this.currentPlayer.x;\r\n        var centerPointy = this.currentPlayer.y;\r\n        var buttleX = this.currentPlayer.x;\r\n        var buttleY = this.currentPlayer.y + this.currentPlayer.height * this.currentPlayer.scale / 2;\r\n        var x = (buttleY - centerPointy) * Math.sin(Math.PI * this.currentPlayer.rotation + offset / 180) + centerPointx;\r\n        var y = (buttleY - centerPointy) * Math.cos(Math.PI * this.currentPlayer.rotation + offset / 180) + (buttleX - centerPointx) * Math.sin(Math.PI * this.currentPlayer.rotation + offset / 180) + centerPointy;\r\n        buttle.setPosition(x, y)\r\n        this.currentPlayer.parent.addChild(buttle);\r\n        this.mainActionList.push({\r\n            type: 1,\r\n            buttleName: buttle.name,\r\n            scale: this.currentPlayer.scale,\r\n            x: x,\r\n            y: y,\r\n            rotation: this.currentPlayer.rotation + offset\r\n        })\r\n\r\n        this.WebScoket.sendMessage({\r\n            msg: 22,\r\n            data: this.mainActionList\r\n        })\r\n        this.mainActionList = []\r\n    }\r\n    generateReceiveButtle(response) {\r\n        var buttle = cc.instantiate(this.Buttle);\r\n        buttle.name = response.buttleName;\r\n        buttle.scale = response.scale;\r\n        buttle.rotation = response.rotation;\r\n        buttle.setPosition(response.x, response.y);\r\n        this.vicePlayer.parent.addChild(buttle);\r\n    }\r\n    // 得到对面子弹生成信息，添加到我方区域\r\n    public addReceiveButtle(response) {\r\n        this.viceActionList.push(response)\r\n    }\r\n    // 获得玩家信息\r\n    getPlayer(mainTank) {\r\n        var viceTank = 'tank_1'\r\n        if (mainTank === 'tank_1') {\r\n            viceTank = 'tank_2'\r\n        }\r\n        var children = this.BattleRegion.children;\r\n        if (!children) {\r\n            return\r\n        }\r\n        for (let i = 0; i < children.length; i++) {\r\n            if (children[i].getChildByName(mainTank)) {\r\n                this.currentPlayer = children[i].getChildByName(mainTank);\r\n            }\r\n            if (children[i].getChildByName(viceTank)) {\r\n                this.vicePlayer = children[i].getChildByName(viceTank)\r\n            }\r\n            if (this.currentPlayer && this.vicePlayer) {\r\n                return\r\n            }\r\n        }\r\n    }\r\n    sendTankData() {\r\n        this.mainActionList.push({\r\n            type: 0,\r\n            x: this.currentPlayer.x,\r\n            y: this.currentPlayer.y,\r\n            rotation: this.currentPlayer.rotation\r\n        })\r\n        if (this.mainActionList.length > 0) {\r\n            this.WebScoket.sendMessage({\r\n                msg: 22,\r\n                data: this.mainActionList\r\n            })\r\n            this.mainActionList = []\r\n        }\r\n    }\r\n    public setOtherTankDataFor2(response) {\r\n        for (let i = 0; i < response.data.length; i++) {\r\n            this.viceActionList.push(response.data[i])\r\n        }\r\n    }\r\n}\r\n"]}