{"version":3,"sources":["..\\..\\..\\..\\assets\\Scripts/assets\\Scripts\\PlayerOperationCtrl.ts"],"names":[],"mappings":";;;;;AAAA,kDAA4C;AAC5C,qDAAgD;AAEhD,oBAAoB;AACpB,2EAA2E;AAC3E,gHAAgH;AAChH,mBAAmB;AACnB,qFAAqF;AACrF,0HAA0H;AAC1H,8BAA8B;AAC9B,qFAAqF;AACrF,0HAA0H;AAEpH,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAAQ,CAAmB;AAG5C;IAAsC,4BAAY;IADlD;QAAA,qEAiNC;QA9MW,kBAAY,GAAY,IAAI,CAAC;QAE7B,YAAM,GAAc,IAAI,CAAC;QAEjC,WAAW;QACH,YAAM,GAAY,IAAI,CAAC;QAC/B,SAAS;QACD,oBAAc,GAAG,CAAC,CAAC;QAC3B,SAAS;QACD,gBAAU,GAAG,CAAC,CAAC;QACvB,SAAS;QACD,gBAAU,GAAe,IAAI,CAAC;QACtC,cAAc;QACN,eAAS,GAAoB,IAAI,CAAC;QAE1C,gBAAgB;QACR,OAAC,GAAG,CAAC,CAAC;QAEN,aAAO,GAAG,CAAC,CAAC,CAAC;;IA4LzB,CAAC;IA3LG,wBAAK,GAAL;QACI,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,YAAY,CAAC,qBAAU,CAAC,CAAC;QACnE,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,YAAY,CAAC,yBAAe,CAAC,CAAC;QACpE,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,UAAU,KAAK;YAC9E,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;YAC3C,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAA;QACF,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,UAAU,KAAK;YAC5E,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;YAC3C,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAA;QACF,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,UAAU,KAAK;YAC/E,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;YAC3C,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAA;QACF,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,UAAU,KAAK;YAC/E,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;YAC3C,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAA;QACF,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,UAAU,KAAK;YAChF,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;YAC3C,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAA;QACF,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,UAAU,KAAK;YAC7E,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;YAC3C,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAA;QACF,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,UAAU,KAAK;YAC5E,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;YAC3C,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACxB,CAAC,CAAC,CAAA;QACF,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,UAAU,KAAK;YAC7E,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;YAC3C,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACxB,CAAC,CAAC,CAAA;QACF,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,UAAU,KAAK;YAC1E,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;YAC3C,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACxB,CAAC,CAAC,CAAA;QACF,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,UAAU,KAAK;YAChF,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;YAC3C,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACxB,CAAC,CAAC,CAAA;QACF,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,UAAU,KAAK;YACjF,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;YAC3C,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACxB,CAAC,CAAC,CAAA;QACF,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,UAAU,KAAK;YAC9E,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;YAC3C,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACxB,CAAC,CAAC,CAAA;QACF,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,UAAU,KAAK;YAC9E,IAAI,GAAG,GAAG,CAAC,CAAC;YACZ,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;YAC3C,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,UAAC,IAAI;gBACjC,IAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,EAAE,EAAC;oBACrB,GAAG,EAAE,CAAC;iBACT;YACL,CAAC,CAAC,CAAA;YACF,IAAG,GAAG,GAAG,CAAC,EAAE;gBACR,IAAI,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;gBAC1B,IAAI,CAAC,cAAc,CAAC,iBAAe,IAAI,CAAC,CAAG,CAAC,CAAA;aAC/C;QACL,CAAC,CAAC,CAAA;IACN,CAAC;IACD,iCAAc,GAAd,UAAe,IAAI;QACf,IAAI,MAAM,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACzC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAA;QAClB,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;QAC9B,IAAI,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC;QACpC,MAAM,CAAC,KAAK,GAAG,KAAK,CAAC;QACrB,MAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC;QAC3B,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QACnB,IAAI,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;QACjC,IAAI,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;QACjC,IAAI,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;QAC5B,IAAI,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC;QACjE,IAAI,CAAC,GAAG,CAAC,OAAO,GAAG,YAAY,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,QAAQ,GAAG,GAAG,CAAC,GAAG,YAAY,CAAC;QACrF,IAAI,CAAC,GAAG,CAAC,OAAO,GAAG,YAAY,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,QAAQ,GAAG,GAAG,CAAC,GAAG,CAAC,OAAO,GAAG,YAAY,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,QAAQ,GAAG,GAAG,CAAC,GAAG,YAAY,CAAC;QACrJ,MAAM,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;QACxB,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QACpC,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC;YACvB,GAAG,EAAE,EAAE;YACP,IAAI,EAAE;gBACF,UAAU,EAAE,MAAM,CAAC,IAAI;gBACvB,KAAK,EAAE,KAAK;gBACZ,CAAC,EAAE,CAAC;gBACJ,CAAC,EAAE,CAAC;gBACJ,QAAQ,EAAE,QAAQ;aACrB;SACJ,CAAC,CAAA;IACN,CAAC;IACM,wCAAqB,GAA5B,UAA6B,QAAQ;QACjC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;QAC3C,IAAI,MAAM,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACzC,MAAM,CAAC,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC;QACvC,MAAM,CAAC,KAAK,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC;QACnC,MAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC;QACzC,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACrD,IAAI,IAAI,GAAG,QAAQ,CAAA;QACnB,IAAG,IAAI,CAAC,MAAM,CAAC,IAAI,KAAK,QAAQ,EAAC;YAC7B,IAAI,GAAG,QAAQ,CAAC;SACnB;QACD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;IACnD,CAAC;IACD,8BAAW,GAAX,UAAY,IAAI;QACZ,IAAI,MAAM,GAAY,IAAI,CAAC;QAC3B,IAAI,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;QAC1C,IAAI,CAAC,QAAQ,EAAE;YACX,OAAM;SACT;QACD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACtC,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE;gBAClC,MAAM,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;gBAC1C,OAAO,MAAM,CAAC;aACjB;SACJ;IACL,CAAC;IACD,4BAAS,GAAT,UAAU,IAAI;QACV,IAAI,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;QAC1C,IAAI,CAAC,QAAQ,EAAE;YACX,OAAM;SACT;QACD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACtC,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE;gBAClC,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;gBAC/C,OAAO;aACV;SACJ;QACD,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;IAC5B,CAAC;IACD,yBAAM,GAAN,UAAO,EAAE;QACL,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,IAAI,CAAC,cAAc,KAAK,CAAC,EAAE;YAC3B,IAAI,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,CAAC,GAAG,CAAC,EAAE;gBAC9B,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,CAAC,CAAA;aACxD;iBAAM;gBACH,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,CAAC,CAAA;aAClD;YACD,IAAI,CAAC,YAAY,EAAE,CAAA;SACtB;QACD,IAAI,IAAI,CAAC,cAAc,KAAK,CAAC,EAAE;YAC3B,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC;YACxD,IAAI,CAAC,YAAY,EAAE,CAAA;SACtB;QACD,IAAI,IAAI,CAAC,UAAU,KAAK,CAAC,EAAE;YACvB,IAAI,KAAK,GAAG,CAAC,CAAC;YACd,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,GAAG,CAAC,CAAA;YACvE,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,GAAG,CAAC,CAAA;YACvE,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,EAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAA;YACxC,IAAI,CAAC,YAAY,EAAE,CAAA;SACtB;QACD,IAAI,IAAI,CAAC,UAAU,KAAK,CAAC,EAAE;YACvB,IAAI,KAAK,GAAG,CAAC,CAAC;YACd,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,GAAG,CAAC,CAAA;YACvE,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,GAAG,CAAC,CAAA;YACvE,IAAI,CAAC,YAAY,EAAE,CAAA;SACtB;IACL,CAAC;IACD,+BAAY,GAAZ;QACI,WAAW,CAAC;YACR,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;QACpB,CAAC,EAAE,IAAI,CAAC,CAAA;QACR,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC;YACvB,GAAG,EAAE,EAAE;YACP,IAAI,EAAE;gBACF,QAAQ,EAAE,IAAI,CAAC,UAAU,CAAC,UAAU;gBACpC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;gBAChB,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;gBAChB,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ;aACjC;SACJ,CAAC,CAAA;IACN,CAAC;IACM,uCAAoB,GAA3B,UAA4B,QAAQ;QAChC,IAAI,MAAM,GAAY,IAAI,CAAC;QAC3B,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QAC3B,IAAI,QAAQ,CAAC,WAAW,KAAK,GAAG,EAAE;YAC9B,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;SACrD;QACD,IAAI,MAAM,EAAE;YACR,MAAM,CAAC,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAA;YAC1B,MAAM,CAAC,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAA;YAC1B,MAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAA;SAC3C;IACL,CAAC;IA7MD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;kDACmB;IAErC;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;4CACa;IAJhB,QAAQ;QAD5B,OAAO;OACa,QAAQ,CAgN5B;IAAD,eAAC;CAhND,AAgNC,CAhNqC,EAAE,CAAC,SAAS,GAgNjD;kBAhNoB,QAAQ","file":"","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["import BattleCtrl from './Page/BattleCatrl';\r\nimport WebSocketManage from './WebSocketManage';\r\nimport { setPoints } from '../../creator';\r\n// Learn TypeScript:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/typescript/index.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n    @property(cc.Node)\r\n    private BattleRegion: cc.Node = null;\r\n    @property(cc.Prefab)\r\n    private Buttle: cc.Prefab = null;\r\n\r\n    // 当前玩家控制节点\r\n    private player: cc.Node = null;\r\n    // 旋转状态控制\r\n    private rotationStatus = 0;\r\n    // 移动状态控制\r\n    private moveStatus = 0;\r\n    // 战斗区域脚本\r\n    private BattleCtrl: BattleCtrl = null;\r\n    // webScoket脚本\r\n    private WebScoket: WebSocketManage = null;\r\n\r\n    // 用于控制坦克子弹的生成控制\r\n    private i = 0;\r\n\r\n    private correct = -1;\r\n    start() {\r\n        this.BattleCtrl = this.node.parent.parent.getComponent(BattleCtrl);\r\n        this.WebScoket = cc.find('WebScoket').getComponent(WebSocketManage);\r\n        var self = this;\r\n        this.node.getChildByName('left').on(cc.Node.EventType.TOUCH_START, function (event) {\r\n            self.getPlayer(self.BattleCtrl.playerName);\r\n            self.rotationStatus = 1;\r\n        })\r\n        this.node.getChildByName('left').on(cc.Node.EventType.TOUCH_END, function (event) {\r\n            self.getPlayer(self.BattleCtrl.playerName);\r\n            self.rotationStatus = 0;\r\n        })\r\n        this.node.getChildByName('left').on(cc.Node.EventType.TOUCH_CANCEL, function (event) {\r\n            self.getPlayer(self.BattleCtrl.playerName);\r\n            self.rotationStatus = 0;\r\n        })\r\n        this.node.getChildByName('right').on(cc.Node.EventType.TOUCH_START, function (event) {\r\n            self.getPlayer(self.BattleCtrl.playerName);\r\n            self.rotationStatus = 2;\r\n        })\r\n        this.node.getChildByName('right').on(cc.Node.EventType.TOUCH_CANCEL, function (event) {\r\n            self.getPlayer(self.BattleCtrl.playerName);\r\n            self.rotationStatus = 0;\r\n        })\r\n        this.node.getChildByName('right').on(cc.Node.EventType.TOUCH_END, function (event) {\r\n            self.getPlayer(self.BattleCtrl.playerName);\r\n            self.rotationStatus = 0;\r\n        })\r\n        this.node.getChildByName('up').on(cc.Node.EventType.TOUCH_START, function (event) {\r\n            self.getPlayer(self.BattleCtrl.playerName);\r\n            self.moveStatus = 1;\r\n        })\r\n        this.node.getChildByName('up').on(cc.Node.EventType.TOUCH_CANCEL, function (event) {\r\n            self.getPlayer(self.BattleCtrl.playerName);\r\n            self.moveStatus = 0;\r\n        })\r\n        this.node.getChildByName('up').on(cc.Node.EventType.TOUCH_END, function (event) {\r\n            self.getPlayer(self.BattleCtrl.playerName);\r\n            self.moveStatus = 0;\r\n        })\r\n        this.node.getChildByName('bottom').on(cc.Node.EventType.TOUCH_START, function (event) {\r\n            self.getPlayer(self.BattleCtrl.playerName);\r\n            self.moveStatus = 2;\r\n        })\r\n        this.node.getChildByName('bottom').on(cc.Node.EventType.TOUCH_CANCEL, function (event) {\r\n            self.getPlayer(self.BattleCtrl.playerName);\r\n            self.moveStatus = 0;\r\n        })\r\n        this.node.getChildByName('bottom').on(cc.Node.EventType.TOUCH_END, function (event) {\r\n            self.getPlayer(self.BattleCtrl.playerName);\r\n            self.moveStatus = 0;\r\n        })\r\n        this.node.getChildByName('fire').on(cc.Node.EventType.TOUCH_START, function (event) {\r\n            var len = 0;\r\n            self.getPlayer(self.BattleCtrl.playerName);\r\n            self.player.parent.children.map((node) => {\r\n                if(node.name.length > 11){\r\n                    len++;\r\n                }\r\n            })\r\n            if(len < 5) {\r\n                self.i = (self.i + 1) % 5;\r\n                self.generateBullet(`tank_buttle_${self.i}`)\r\n            }\r\n        })\r\n    }\r\n    generateBullet(name) {\r\n        var buttle = cc.instantiate(this.Buttle);\r\n        buttle.name = name\r\n        var scale = this.player.scale;\r\n        var rotation = this.player.rotation;\r\n        buttle.scale = scale;\r\n        buttle.rotation = rotation;\r\n        buttle.zIndex = -1;\r\n        var centerPointx = this.player.x;\r\n        var centerPointy = this.player.y;\r\n        var buttleX = this.player.x;\r\n        var buttleY = this.player.y + this.player.height * scale / 2 + 2;\r\n        var x = (buttleY - centerPointy) * Math.sin(Math.PI * rotation / 180) + centerPointx;\r\n        var y = (buttleY - centerPointy) * Math.cos(Math.PI * rotation / 180) + (buttleX - centerPointx) * Math.sin(Math.PI * rotation / 180) + centerPointy;\r\n        buttle.setPosition(x, y)\r\n        this.player.parent.addChild(buttle);\r\n        this.WebScoket.sendMessage({\r\n            msg: 23,\r\n            data: {\r\n                buttleName: buttle.name,\r\n                scale: scale,\r\n                x: x,\r\n                y: y,\r\n                rotation: rotation\r\n            }\r\n        })\r\n    }\r\n    public generateReceiveButtle(response) {\r\n        this.getPlayer(this.BattleCtrl.playerName);\r\n        var buttle = cc.instantiate(this.Buttle);\r\n        buttle.name = response.data.buttleName;\r\n        buttle.scale = response.data.scale;\r\n        buttle.rotation = response.data.rotation;\r\n        buttle.setPosition(response.data.x, response.data.y);\r\n        var tank = 'tank_2'\r\n        if(this.player.name === 'tank_2'){\r\n            tank = 'tank_1';\r\n        }\r\n        this.getTankName(tank).parent.addChild(buttle);\r\n    }\r\n    getTankName(tank) {\r\n        var player: cc.Node = null;\r\n        var children = this.BattleRegion.children;\r\n        if (!children) {\r\n            return\r\n        }\r\n        for (let i = 0; i < children.length; i++) {\r\n            if (children[i].getChildByName(tank)) {\r\n                player = children[i].getChildByName(tank);\r\n                return player;\r\n            }\r\n        }\r\n    }\r\n    getPlayer(tank) {\r\n        var children = this.BattleRegion.children;\r\n        if (!children) {\r\n            return\r\n        }\r\n        for (let i = 0; i < children.length; i++) {\r\n            if (children[i].getChildByName(tank)) {\r\n                this.player = children[i].getChildByName(tank);\r\n                return;\r\n            }\r\n        }\r\n        console.log(this.player)\r\n    }\r\n    update(dt) {\r\n        var self = this;\r\n        if (this.rotationStatus === 1) {\r\n            if (this.player.rotation - 5 < 0) {\r\n                this.player.rotation = 360 - this.player.rotation - 5\r\n            } else {\r\n                this.player.rotation = this.player.rotation - 5\r\n            }\r\n            this.sendTankData()\r\n        }\r\n        if (this.rotationStatus === 2) {\r\n            this.player.rotation = (this.player.rotation + 5) % 360;\r\n            this.sendTankData()\r\n        }\r\n        if (this.moveStatus === 1) {\r\n            var speed = 5;\r\n            this.player.x += speed * Math.sin(Math.PI * this.player.rotation / 180)\r\n            this.player.y += speed * Math.cos(Math.PI * this.player.rotation / 180)\r\n            console.log(this.player.x,this.player.y)\r\n            this.sendTankData()\r\n        }\r\n        if (this.moveStatus === 2) {\r\n            var speed = 5;\r\n            this.player.x -= speed * Math.sin(Math.PI * this.player.rotation / 180)\r\n            this.player.y -= speed * Math.cos(Math.PI * this.player.rotation / 180)\r\n            this.sendTankData()\r\n        }\r\n    }\r\n    sendTankData() {\r\n        setInterval(() => {\r\n            console.log('1')\r\n        }, 1000)\r\n        let self = this;\r\n        this.WebScoket.sendMessage({\r\n            msg: 22,\r\n            data: {\r\n                tankName: self.BattleCtrl.playerName,\r\n                x: self.player.x,\r\n                y: self.player.y,\r\n                rotation: self.player.rotation\r\n            }\r\n        })\r\n    }\r\n    public setOtherTankDataFor2(response){\r\n        var player: cc.Node = null;\r\n        console.log(response.data);\r\n        if (response.dataMessage === '2') {\r\n            player = this.getTankName(response.data.tankName);\r\n        }\r\n        if (player) {\r\n            player.x = response.data.x\r\n            player.y = response.data.y\r\n            player.rotation = response.data.rotation\r\n        }\r\n    }\r\n}\r\n"]}